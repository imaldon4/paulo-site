(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1083:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tooltipMessage=t.menuItemDescription=t.remainingPages=t.isEcommercePage=t.isUserSystemsPage=t.isStaticPage=t.isDraftPage=t.isDynPage=t.isHomePage=t.isPage=void 0;var n=a(389),r=a(451),i=a(381),l=a(386),o=function(e){return(0,r.isIndexable)(e)&&"Page"===(0,r.getElse)("type","",e)};t.isPage=o;var s=function(e){return o(e)&&e.isHome};t.isHomePage=s;t.isDynPage=function(e){return o(e)&&null!==(0,r.getElse)("dynCollection",null,e)};t.isDraftPage=function(e){return o(e)&&(0,r.getElse)("draft",!1,e)};t.isStaticPage=function(e){return o(e)&&null===(0,r.getElse)("dynCollection",null,e)};t.isUserSystemsPage=function(e){return(0,l.isUtilityPage)(e)&&e.utilKey.includes("usys-")};t.isEcommercePage=function(e,t){if(!o(e)&&!e.dynCollection&&!t)return!1;var a=t.get(e.dynCollection);return!!a&&((0,i.isProductsCollection)(a)||(0,i.isCategoriesCollection)(a)||(0,i.isSkusCollection)(a))};t.remainingPages=function(e,t){return e.maxPages-(0,n.getStaticPages)(t).count()};t.menuItemDescription=function(e){return"save-as-draft-option"===e?"Drafts will not be published or indexed by search engines.":"staged-for-publish-option"===e?"Save changes. This page will publish the next time you publish the project.":""};t.tooltipMessage=function(e){return s(e)?"The homepage can’t be a draft.":"401"===e.slug?"The password utility page can’t be a draft.":"404"===e.slug?"The 404 utility page can’t be a draft.":"checkout"===e.slug?"The checkout page can’t be a draft.":"order-confirmation"===e.slug?"The order confirmation page can’t be a draft.":"paypal-checkout"===e.slug?"The PayPal checkout page can‘t be a draft.":""}},2383:function(e,t,a){"use strict";var n=a(124),r=a(322);Object.defineProperty(t,"__esModule",{value:!0}),t.After=t.Before=t.default=t.USER_SYSTEMS_SECTION_PLACEHOLDER=t.COMMERCE_SECTION_PLACEHOLDER=t.DYNAMIC_SECTION_PLACEHOLDER=t.COMMERCE_SECTION_KEY=t.STATIC_SECTION_KEY=void 0;var i=n(a(338)),l=n(a(321)),o=n(a(323)),s=n(a(324)),d=n(a(328)),c=n(a(327)),u=n(a(332)),g=n(a(329)),f=n(a(325)),m=n(a(339)),p=n(a(336)),h=r(a(320)),P=a(331),E=a(326),S=a(342),v=n(a(503)),y=n(a(378)),b=n(a(345)),C=r(a(662)),T=a(359),w=a(5632),D=r(a(736)),x=a(334),I=a(330),M=a(337),_=n(a(720)),A=a(1083),k=a(386),F=a(354),R=r(a(389)),N=a(515),O=a(392),L=a(349),H=a(428),U=a(400),B=a(1037);t.STATIC_SECTION_KEY="___STATIC_PAGES___";t.COMMERCE_SECTION_KEY="Ecommerce Pages";var V="CollectionPagesEmpty";t.DYNAMIC_SECTION_PLACEHOLDER=V;var z="CommercePagesEmpty";t.COMMERCE_SECTION_PLACEHOLDER=z;var j="UserPagesEmpty";t.USER_SYSTEMS_SECTION_PLACEHOLDER=j;var G,Y=(0,M.weakMemo)(function(e){return R.getPageNodes(e)}),W=(0,M.weakMemo)(function(e){return(0,M.weakMemo)(function(t){return(0,M.weakMemo)(function(a){return a.set("expandedFolders",t.filter(k.isFolder).keySeq().toSet().subtract(e))})})}),q={static:{match:"Static Pages",actions:{select:E.identity,preselect:E.identity}},utility:{match:"Utility Pages",actions:{select:E.identity,preselect:E.identity}},cms:{match:"CMS Collection Pages",actions:{select:E.identity,preselect:E.identity}},ecommerce:{match:"Ecommerce Pages",actions:{select:E.identity,preselect:E.identity}},userSystems:{match:"User Pages",actions:{select:E.identity,preselect:E.identity}},emptyCms:{match:V,actions:{select:E.identity,preselect:E.identity}},emptyEcommerce:{match:z,actions:{select:E.identity,preselect:E.identity}},emptyUserSystems:{match:j,actions:{select:E.identity,preselect:E.identity}}},K=function(e){return e.name},J=function(e,t){return e.findIndex(function(e){var a=e.match;return(a&&a.id)===(t&&t.id)})},Q=h.memo(function(e){var t=e.collapsed,a=e.dragTargetId,n=e.dropLocation,r=e.renderRow,i=e.inputValue,l=e.onInputChange,o=e.onClear,s=e.rowActions,d=e.currentPageId,c=e.pageState,u=e.pageManagerState,g=e.collectionState,f=e.betaFeatureState,m=e.designer,P=e.uiState,E=Y(c);u=h.useMemo(function(){return""===i?u:W(t)(E)(u)},[i,u,t,E]);var S=h.useMemo(function(){return te(c,u,g,f,m,P,a,n).reduce(function(e,t){return"string"==typeof t?e:(e.searchPages.push(t),e.source.set(t.id,t),e)},{searchPages:[],source:new Map})},[c,u,g,f,m,P,a,n]),v=S.searchPages,y=S.source,T=h.useCallback(function(e,t,a){var n=e.reduce(function(e,a){var n=t[a];if(null==n)return e;if("string"==typeof n)return e.add(n);var r=n.id;e.add(r);var i=!0,l=!1,o=void 0;try{for(var s,d=R.nodeAncestry(r,E)[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var c=s.value;y.has(c.id)&&e.add(c.id)}}catch(e){l=!0,o=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw o}}if("Folder"===n.type){var u=!0,g=!1,f=void 0;try{for(var m,p=R.nodeDescendants(r,E)[Symbol.iterator]();!(u=(m=p.next()).done);u=!0){var h=m.value;y.has(h.id)&&e.add(h.id)}}catch(e){g=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(g)throw f}}}return e},new Set),r=[],i=!0,l=!1,o=void 0;try{for(var s,d=y[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var c=(0,p.default)(s.value,2),u=c[0],g=c[1];n.has(u)&&r.push({match:g,actions:a(g)})}}catch(e){l=!0,o=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw o}}return r},[y,E]),w=h.useCallback(function(e){(0,k.isFolder)(e)&&(e.isExpanded?s.collapseFolder(e.id):s.expandFolder(e.id)),((0,A.isStaticPage)(e)||(0,A.isDynPage)(e))&&(e.isSelected||d===e.id||s.switchPage(e.id))},[s,d]),D=(0,_.default)({items:v,reduceItems:T,getSearchableText:K,findNextIndex:J,query:i,onQueryChange:l,onSelectChange:w}),x=(0,p.default)(D,3),I=x[0],M=x[1],F=x[2],N=F.onKeyDown,O=M.preselected,L=function(e,t){var a=h.useState(null),n=(0,p.default)(a,2),r=n[0],i=n[1];h.useEffect(function(){i(e)},[e]);return function(e){"Enter"===e.key&&r&&"Folder"===r.type&&(t(r),i(r.update("isExpanded",function(e){return!e})))}}(O,w);return h.createElement(h.Fragment,null,h.createElement(C.HiddenAutoFocusedItem,{key:"hidden-autofocus-item"}),h.createElement(C.Wrapper,{key:"page-search-input"},i&&h.createElement(C.CloseIcon,{onClick:o}),h.createElement(C.SearchIcon,{focus:M.focus}),h.createElement(b.default,null,h.createElement(C.Input,{onFocus:F.onFocus,onBlur:F.onBlur,focus:M.focus,value:i,onChange:F.onChange,onKeyDown:function(e){"Escape"===e.key&&o(e),L(e),N(e)},placeholder:"Search pages"}))),h.createElement(ae,{key:"page-list-input","data-automation-id":"left-sidebar-pages-list"},h.createElement($,{betaFeatureState:f,sortedPageResults:I,collectionState:g,renderRow:r,preselected:O,isQuerying:""!==i})))}),$=function(e){var t=e.betaFeatureState,a=e.sortedPageResults,n=e.collectionState,r=e.renderRow,i=e.preselected,l=e.isQuerying;if(0===a.length)return h.createElement(C.NoResults,null,"No matching pages or folders");var o=a.reduce(function(e,t){return e[function(e,t){return t&&(0,A.isEcommercePage)(e,t.collections)||e===z||(0,N.isCheckoutRelatedPage)(e)?"ecommerce":(0,A.isDynPage)(e)||e===V?"cms":(0,A.isUserSystemsPage)(e)||e===j?"userSystems":(0,k.isUtilityPage)(e)?"utility":"static"}(t.match,n)].push(r(t,i)),e},{static:[],utility:[],cms:[],ecommerce:[],userSystems:[]}),s=o.static,d=o.utility,c=o.cms,u=o.ecommerce,g=o.userSystems,f=s.length>0,p=d.length>0,P=c.length>0,E=u.length>0,S=g.length>0,v=[];return!f&&l||(v.push(r(q.static)),v.push.apply(v,(0,m.default)(s))),!p&&l||(v.push(r(q.utility)),v.push.apply(v,(0,m.default)(d))),!E&&l||(v.push(r(q.ecommerce)),v.push.apply(v,(0,m.default)(u))),E||l||v.push(r(q.emptyEcommerce)),t.userSystems&&(!S&&l||(v.push(r(q.userSystems)),v.push.apply(v,(0,m.default)(g))),S||l||v.push(r(q.emptyUserSystems))),!P&&l||(v.push(r(q.cms)),v.push.apply(v,(0,m.default)(c))),P||l||v.push(r(q.emptyCms)),v},Z=(0,I.styledDiv)(function(e){var t=e.theme.colors;return e.highlight?{backgroundColor:t.backgroundVivid,color:"white"}:x.emptyObject}),X=(0,S.container)(function(e){return{pageState:e.PageStore,pageManagerState:e.PageManagerUIStore,siteData:e.SiteDataStore,designer:e.DesignerStore,collectionState:e.CollectionStore,betaFeatureState:e.BetaFeatureStore,uiState:e.UiStore,userCapabilitiesState:e.UserCapabilitiesStore}})((G=function(e){var t=null,a=null;return{captureDragEvents:function(n){var r=function cancelDrag(){(0,x.isNil)(a)||(de("mouseup",cancelDrag),e({dragStatus:"cancel",dragTargetId:a=null,dropLocation:t=null}))};return{onDragStart:function(i){i.preventDefault(),se("mouseup",r),t=oe(i,n),e({dragStatus:"start",dropLocation:t,dragTargetId:a=n})},onMouseMove:function(r){if(!t)return;r.stopPropagation();var i=oe(r,n);if(i.constructor===t.constructor&&t.id===i.id)return;e({dragStatus:"drag",dropLocation:t=i,dragTargetId:a})},onMouseUp:function(n){if(!t)return;n.stopPropagation(),de("mouseup",r),e({dragStatus:"drop",dragTargetId:a=null,dropLocation:t=null})}}},getDragState:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{dropLocation:t,dragTargetId:a,canDrag:e}}}},function(e){return function(t){function ProcessDecorator(){var e,t;(0,o.default)(this,ProcessDecorator);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t=(0,d.default)(this,(e=(0,c.default)(ProcessDecorator)).call.apply(e,[this].concat(n))),(0,f.default)((0,u.default)(t),"_handleEvent",function(e){return t.setState(e,function(){["cancel","drop"].includes(t.state.dragStatus)&&t.setState({dragStatus:null})})}),(0,f.default)((0,u.default)(t),"process",G(t._handleEvent)),t}return(0,g.default)(ProcessDecorator,t),(0,s.default)(ProcessDecorator,[{key:"render",value:function(){return h.createElement(e,(0,l.default)({},this.props,this.process,this.state))}}]),ProcessDecorator}(h.Component)})(function(e){function PageListContainer(){var e,t;(0,o.default)(this,PageListContainer);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t=(0,d.default)(this,(e=(0,c.default)(PageListContainer)).call.apply(e,[this].concat(n))),(0,f.default)((0,u.default)(t),"state",{inputValue:"",collapsed:(0,P.Set)()}),(0,f.default)((0,u.default)(t),"onChange",function(e){var a=t.state.collapsed;t.setState({inputValue:e,collapsed:a.size>0?(0,P.Set)():a})}),(0,f.default)((0,u.default)(t),"onClear",function(e){e.stopPropagation(),e.preventDefault();var a=t.state.collapsed;t.setState({inputValue:"",collapsed:a.size>0?(0,P.Set)():a})}),(0,f.default)((0,u.default)(t),"onExpandFolder",function(e){""===t.state.inputValue&&t.props.flux.__DEPRECATED__getCreators("PageManagerActionCreators").expandFolder(e)}),(0,f.default)((0,u.default)(t),"onCollapseFolder",function(e){""===t.state.inputValue&&t.props.flux.__DEPRECATED__getCreators("PageManagerActionCreators").collapseFolder(e)}),(0,f.default)((0,u.default)(t),"rowActions",(0,l.default)({},(0,E.pick)(t.props.flux.__DEPRECATED__getCreators("PageManagerActionCreators"),["openSettings","closeSettings","mintPage","switchPage"]),{expandFolder:t.onExpandFolder,collapseFolder:t.onCollapseFolder,panelOpened:function(e){return t.props.flux.dispatch((0,T.panelOpened)(e))}})),(0,f.default)((0,u.default)(t),"renderRow",function(e,a){var n=e.match,r=e.actions,i=t.props,o=i.captureDragEvents,s=i.getDragState,d=i.siteData,c=i.pageState,u=t.props.designer,g=u.currentPageId,f=u.isPreviewMode,m=u.isAnnotationsMode,p=t.props.userCapabilitiesState.canManagePageSettings,P=n.name?(0,B.automationFriendlyName)(n.name)+"-page":"";return h.createElement(Z,{key:n.id||n,highlight:n!==z&&n!==V&&n!==j&&n.id===(a&&a.id)},h.createElement(w.PageListRow,(0,l.default)({onClick:r.select,onMouseOver:r.preselect,item:n,"data-automation-id":P,isSiteProtected:d.protected,actions:t.rowActions,remainingPages:(0,A.remainingPages)(d,c),dragState:s(""===t.state.inputValue),currentPageId:g,allowPasswordProtection:d.allowPasswordProtection},o(n.id),{canManagePageSettings:p&&!m,isPreviewMode:f,isAnnotationsMode:m})))}),t}return(0,g.default)(PageListContainer,e),(0,s.default)(PageListContainer,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.inputValue!==t.inputValue||this.state.focus!==t.focus||this.state.collapsed!==t.collapsed||!(0,x.isNil)(this.props.dropLocation)||["drop","cancel"].includes(this.props.dragStatus)||!te(this.props.pageState,this.props.pageManagerState,this.props.collectionState,this.props.betaFeatureState,this.props.designer,this.props.uiState,this.props.dragTargetId,this.props.dropLocation).equals(te(e.pageState,e.pageManagerState,e.collectionState,e.betaFeatureState,this.props.designer,this.props.uiState,e.dragTargetId,e.dropLocation))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if("drag"===this.props.dragStatus&&"drop"===e.dragStatus){var t=le(this.props.dragTargetId,this.props.dropLocation,e.pageState,e.pageManagerState,e.collectionState,e.betaFeatureState,e.designer),a=this.props.pageManagerState;D.isSelected(t.id,a)?this.props.flux.__DEPRECATED__getCreators("PageManagerActionCreators").updateSelection([],{parentId:t.parentId,siblingIndex:t.siblingIndex,slug:t.slug}):this.props.flux.__DEPRECATED__getCreators("PageManagerActionCreators").moveItem(t)}}},{key:"render",value:function(){return h.createElement(Q,{pageState:this.props.pageState,pageManagerState:this.props.pageManagerState,collectionState:this.props.collectionState,betaFeatureState:this.props.betaFeatureState,designer:this.props.designer,uiState:this.props.uiState,inputValue:this.state.inputValue,onInputChange:this.onChange,onClear:this.onClear,collapsed:this.state.collapsed,dragTargetId:this.props.dragTargetId,dropLocation:this.props.dropLocation,renderRow:this.renderRow,rowActions:this.rowActions,currentPageId:this.props.designer.currentPageId})}}]),PageListContainer}(h.Component)));t.default=X;var ee=function(e,t){return e.map(function(e){return t.find(function(t){return t.dynCollection===e._id})}).filterNot(x.isNil)},te=function(e,t,a,n,r,i,l,o){var s=D.getCurrentPageState(e,t),d=D.selection(t).id,c=R.nodeDescendants(l,R.getPageTreeNodes(s)).map(function(e){return e.id}),u=R.getPageNodes(s),g=D.staticPageList(e,t,{skipUtilityPages:!0}).filter(function(e){return!(0,F.isMint)(e)}).map(function(e){return e.set("isHovered",!(0,x.isNil)(o)&&ie(o,e.id)).set("isValidDropLocation",!c.includes(e.id)).set("selectedItemId",d).set("protectedAncestor",R.getProtectedAncestor({pages:u,page:u.get(e.get("id"))}))}),f=D.utilityPageList(e,t).filter(function(e){return!(("search"===e.slug||"checkout"===e.slug||"order-confirmation"===e.slug||"paypal-checkout"===e.slug)&&(0,F.isMint)(e))}).map(function(e){return e.set("isHovered",!(0,x.isNil)(o)&&ie(o,e.id)).set("isValidDropLocation",!c.includes(e.id)).set("selectedItemId",d)}),m=function(e){return"checkout"===e.slug||"order-confirmation"===e.slug||"paypal-checkout"===e.slug},p=f.filterNot(function(e){return m(e)}),h=f.filter(function(e){return m(e)}).sort(O.sortCommerceUtilPages),E=D.dynPageList(e,t),S=(0,O.excludeCommerceCollections)(a.collections).sortBy(U.getSortPos),v=ee(S,E).map(function(e){return e.set("isValidDropLocation",!1)}),y=(0,U.sortByNameDesc)(ee((0,O.onlyVisibleCommerceCollections)(a.collections),E).map(function(e){return e.set("isValidDropLocation",!1)})),b=P.List.of("___STATIC_PAGES___").concat("Static Pages").concat(g).concat(p.size?p.unshift("Utility Pages"):p),C=P.List.of("CMS Collection Pages").concat(v.isEmpty()?[V]:v);return b.concat("Ecommerce Pages").concat(y.isEmpty()?[z]:y).concat(h).concat(C)},ae=function(e){function PageList(){return(0,o.default)(this,PageList),(0,d.default)(this,(0,c.default)(PageList).apply(this,arguments))}return(0,g.default)(PageList,e),(0,s.default)(PageList,[{key:"render",value:function(){var e=this.props,t=e.children,a=(0,i.default)(e,["children"]);return h.createElement(y.default.Body,(0,l.default)({flex:!0,grow:1},a),h.createElement(v.default,{style:{width:"100%"}},t))}}]),PageList}(h.Component),ne=function Before(e){(0,o.default)(this,Before),this.node=e};t.Before=ne;var re=function After(e){(0,o.default)(this,After),this.node=e};t.After=re;var ie=function(e,t){return e.node===t},le=function(e,t,a,n,r,i,l){var o=t.node,s=te(a,n,r,i,l,e,t),d=R.getPageTreeNodes(a),c=d.get(e),u=d.get(o);if(!function(e,t,a){var n=a.find(function(e){return e.id===t});return!(0,A.isHomePage)(n)&&t!==e&&n.isValidDropLocation}(e,o,s))return c;if((0,k.isFolder)(u)){var g=R.siblingIndexFromFolderTarget(u,d);return c.merge({parentId:u.id,siblingIndex:g,slug:R.makeUniqueSlug(c.slug,u.id,d.delete(c.id))})}if(function(e,t){return e.parentId===t.parentId}(c,u)&&function(e,t,a){var n=a.findIndex(function(e){return e.id===t});return a.findIndex(function(t){return t.id===e})<n}(e,o,s)){var f=R.siblingIndexFromPageTarget(u,d,t instanceof re);return c.merge({parentId:u.parentId,siblingIndex:f})}var m=R.siblingIndexFromPageTarget(u,d,!(t instanceof ne));return c.merge({parentId:u.parentId,siblingIndex:m,slug:R.makeUniqueSlug(c.slug,u.parentId,d.delete(c.id))})},oe=function(e,t){var a=e.currentTarget,n=e.clientY,r=a.getBoundingClientRect(),i=r.top;return function(e,t,a){return t+e/2>a}(r.height,i,n)?new ne(t):new re(t)},se=function(e,t){L.window.document.addEventListener(e,t),(0,H.getActiveDocument)().addEventListener(e,t)},de=function(e,t){L.window.document.removeEventListener(e,t),(0,H.getActiveDocument)().removeEventListener(e,t)}},2384:function(e,t,a){"use strict";var n=a(320).createElement;e.exports=function(e){var t=e.scale||1;return n("svg",{"data-icon":"HomeMedium","aria-hidden":!0,focusable:!1,width:16*t,height:15*t,viewBox:"0 0 16 15",y:null!=e.y?e.y:null,x:null!=e.x?e.x:null,className:"bem-Svg"+(e.className?" "+e.className:""),style:Object.assign({display:"block",transform:"translate(0,0)"},e.style)},n("path",{fill:"currentColor",d:"M8 1L1 7v1h2v6h3v-3c.216-1.14.87-2 2-2s1.784.86 2 2v3h3V8h2V7L8 1z"}))},e.exports.displayName="Svg(HomeMedium)"},5629:function(e,t,a){"use strict";var n=a(124),r=a(322);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(323)),l=n(a(324)),o=n(a(328)),s=n(a(327)),d=n(a(332)),c=n(a(329)),u=n(a(325)),g=r(a(320)),f=a(359),m=a(342),p=n(a(5630)),h=n(a(5631)),P=a(908),E=n(a(378)),S=a(438),v=a(383),y=n(a(500)),b=n(a(2383)),C=n(a(5635)),T=a(386),w=a(389),D=(0,m.container)(function(e){var t=e.DesignerStore,a=t.isPreviewMode,n=t.isAnnotationsMode,r=e.UserCapabilitiesStore.canManagePageSettings,i=e.PageStore;return{isPreviewMode:a,canManagePageSettings:r,isMultiPlayerViewer:e.MultiPlayerStore.isViewer,isAnnotationsMode:n,noPagesCreated:!(0,T.hasCreatedPages)(i)}})(function(e){function PageManagerContainer(){var e,t;(0,i.default)(this,PageManagerContainer);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t=(0,o.default)(this,(e=(0,s.default)(PageManagerContainer)).call.apply(e,[this].concat(n))),(0,u.default)((0,d.default)(t),"mintPage",function(){(0,t.props.flux.__DEPRECATED__getCreators("PageManagerActionCreators").mintPage)(w.ROOT_NODE.id,{analytics:{location:"page-panel"}})}),(0,u.default)((0,d.default)(t),"hideLeftPanel",function(){t.props.flux.dispatch((0,f.paneClosed)("left"))}),t}return(0,c.default)(PageManagerContainer,e),(0,l.default)(PageManagerContainer,[{key:"render",value:function(){var e=this.props,t=e.flux,a=e.noPagesCreated,n=e.isPreviewMode,r=e.canManagePageSettings,i=e.isAnnotationsMode,l=e.isMultiPlayerViewer,o=t.__DEPRECATED__getCreators("PageManagerActionCreators").mintFolder,s={hidePanel:this.hideLeftPanel,mintFolder:o,mintPage:this.mintPage,noPagesCreated:a,isPreviewMode:n,canManagePageSettings:r,isAnnotationsMode:i,isMultiPlayerViewer:l};return g.default.createElement(x,s)}}]),PageManagerContainer}(g.Component));t.default=D;var x=function(e){var t=e.mintPage,a=e.mintFolder,n=e.hidePanel,r=e.noPagesCreated,i=e.isPreviewMode,l=e.canManagePageSettings,o=e.isAnnotationsMode,s=e.isMultiPlayerViewer;return g.default.createElement(P.LeftPanelLayer,null,g.default.createElement(E.default,{size:250},g.default.createElement(E.default.Head,null,g.default.createElement(E.default.Title,null,"Pages"),g.default.createElement(E.default.Close,{onClick:n,push:i?"right":null}),i||o?null:g.default.createElement(E.default.Actions,null,g.default.createElement(v.__DEPRECATED__SigmaGrid,{gridAutoFlow:"column",gridGap:2},g.default.createElement(y.default,M(l,s),g.default.createElement(S.__DEPRECATED__SigmaButton,{sizing:"large",onClick:a,icon:g.default.createElement(p.default,null),"data-automation-id":"add-folder-button","aria-label":"Create New Folder"})),g.default.createElement(y.default,I(l,s),g.default.createElement(S.__DEPRECATED__SigmaButton,{sizing:"large",intent:r?"primary":"default",onClick:t,"data-automation-id":"add-page-button","aria-label":"Create New Page",icon:g.default.createElement(h.default,null)}))))),g.default.createElement(b.default,null)),g.default.createElement(C.default,{canManagePageSettings:l,isPreviewMode:i,isAnnotationsMode:o}))},I=function(e,t){return e?{content:"Create New Page"}:{content:"New pages can’t be created in ".concat(t?"view":"read","-only mode."),mode:"warn"}},M=function(e,t){return e?{content:"Create New Folder"}:{content:"New folders can’t be created in ".concat(t?"view":"read","-only mode."),mode:"warn"}}},5630:function(e,t,a){"use strict";var n=a(320).createElement;e.exports=function(e){var t=e.scale||1;return n("svg",{"data-icon":"FolderAdd24","aria-hidden":!0,focusable:!1,width:24*t,height:24*t,viewBox:"0 0 24 24",y:null!=e.y?e.y:null,x:null!=e.x?e.x:null,className:"bem-Svg"+(e.className?" "+e.className:""),style:Object.assign({display:"block",transform:"translate(0,0)"},e.style)},n("path",{d:"M5.96 6.75a6.3 6.3 0 00.946-.81c.184-.187.354-.377.513-.56L6.122 4H1v3h4.416c.016.01.255-.05.545-.25H5.96zM16 6H9.498c-.132.17-.29.37-.487.6-.48.56-1.114 1.24-1.845 1.752-.493.333-1.034.635-1.747.648H1v8h12v-4h3V6zm4 9v-3h-2v3h-3v2h3v3h2v-3h3v-2h-3z",fill:"currentColor"}))},e.exports.displayName="Svg(FolderAdd24)"},5631:function(e,t,a){"use strict";var n=a(320).createElement;e.exports=function(e){var t=e.scale||1;return n("svg",{"data-icon":"PageAdd24","aria-hidden":!0,focusable:!1,width:24*t,height:24*t,viewBox:"0 0 24 24",y:null!=e.y?e.y:null,x:null!=e.x?e.x:null,className:"bem-Svg"+(e.className?" "+e.className:""),style:Object.assign({display:"block",transform:"translate(0,0)"},e.style)},n("path",{d:"M18 15v-3h-2v3h-3v2h3v3h2v-3h3v-2h-3zm-4-7l-4-4H3v13h8v-4h3V8z",fill:"currentColor"}))},e.exports.displayName="Svg(PageAdd24)"},5632:function(e,t,a){"use strict";var n=a(124);Object.defineProperty(t,"__esModule",{value:!0}),t.PageListRow=void 0;var r=n(a(338)),i=n(a(321)),l=n(a(323)),o=n(a(324)),s=n(a(328)),d=n(a(327)),c=n(a(332)),u=n(a(329)),g=n(a(325)),f=n(a(320)),m=a(330),p=n(a(2384)),h=n(a(520)),P=n(a(623)),E=n(a(535)),S=n(a(2036)),v=n(a(343)),y=n(a(384)),b=n(a(378)),C=n(a(503)),T=n(a(410)),w=n(a(440)),D=n(a(2103)),x=n(a(5633)),I=a(5634),M=a(386),_=a(354),A=a(2383),k=a(334),F=a(2186),R=a(369),N=a(1037),O=function(e){function PageListRow(){var e,t;(0,l.default)(this,PageListRow);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t=(0,s.default)(this,(e=(0,d.default)(PageListRow)).call.apply(e,[this].concat(n))),(0,g.default)((0,c.default)(t),"toggleFolder",function(){var e=t.props,a=e.item,n=e.actions,r=n.expandFolder,i=n.collapseFolder;a.isExpanded?i(a.id):r(a.id)}),(0,g.default)((0,c.default)(t),"switchPage",function(){var e=t.props,a=e.currentPageId,n=e.item;se(a,n)||t.props.actions.switchPage(t.props.item.id)}),(0,g.default)((0,c.default)(t),"mintNestedPage",function(e){e.stopPropagation(),t.props.actions.mintPage(t.props.item.id,{analytics:{location:"page-panel"}})}),(0,g.default)((0,c.default)(t),"openSettings",function(e){e.stopPropagation(),t.props.actions.openSettings(t.props.item.id)}),(0,g.default)((0,c.default)(t),"closeSettings",function(e){e.stopPropagation(),t.props.actions.closeSettings()}),t}return(0,u.default)(PageListRow,e),(0,o.default)(PageListRow,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.isPreviewMode,r=t.isAnnotationsMode,l=t.canManagePageSettings,o={openSettings:this.openSettings,closeSettings:this.closeSettings};return(0,M.isFolder)(a)?f.default.createElement(H,(0,i.default)({},this.props,{onClick:this.toggleFolder,actions:(0,i.default)({},o,{mintNestedPage:this.mintNestedPage})})):(0,M.isStaticPage)(a)?f.default.createElement(L,(0,i.default)({},this.props,{onClick:this.switchPage,actions:o,beta:(0,M.isBetaPage)(),canManagePageSettings:l,isAnnotationsMode:r})):(0,M.isDynPage)(a)?f.default.createElement(z,(0,i.default)({},this.props,{onClick:this.switchPage,actions:o})):f.default.createElement(j,{item:a,isPreviewMode:n,isAnnotationsMode:r,canManagePageSettings:l,onRequestCommercePanelOpen:function(){return e.props.actions.panelOpened(R.COMMERCE_PANEL)},onRequestDynamoPanelOpen:function(){return e.props.actions.panelOpened(R.DYNAMO_PANEL)},onRequestUsersPanelOpen:function(){return e.props.actions.panelOpened(R.USERS_PANEL)}})}}]),PageListRow}(f.default.Component);t.PageListRow=O;var L=function(e){var t=e.item,a=e.dragState,n=e.isSiteProtected,l=e.canManagePageSettings,o=e.isAnnotationsMode,s=(0,r.default)(e,["item","dragState","isSiteProtected","canManagePageSettings","isAnnotationsMode"]);return f.default.createElement(C.default.Row,(0,i.default)({style:(0,i.default)({},U(t),{position:"relative"}),clickable:!se(s.currentPageId,t),draggable:V(t,a)&&!o,isSelected:se(s.currentPageId,t)},s),(0,M.isHomePage)(t)||!t.isHovered?null:f.default.createElement(te,{item:t,dropLocation:a.dropLocation}),(0,I.NestingIcons)({item:t}),f.default.createElement(C.default.Cell,null,f.default.createElement(re,{allowPasswordProtection:s.allowPasswordProtection,passwordProtected:t.get("passwordProtected"),ancestorProtected:null!==t.get("protectedAncestor")||n,isDraft:(0,M.isDraftPage)(t)})),f.default.createElement(C.default.Cell,{basis:0,grow:!0,ellipsis:!0},f.default.createElement(y.default,{"data-automation-id":se(s.currentPageId,t)?"selected-page-name":null,baseline:!0},(0,M.isDraftPage)(t)?"[Draft] "+t.name:t.name),s.beta&&f.default.createElement(ue,null,f.default.createElement(S.default,null))),f.default.createElement(K,{item:t,actions:s.actions,isDragging:!(0,k.isNil)(a.dropLocation),remainingPages:s.remainingPages,isSelected:se(s.currentPageId,t),canManagePageSettings:l,isAnnotationsMode:o}))},H=function(e){var t=e.item,a=e.isSiteProtected,n=e.canManagePageSettings,l=e.isAnnotationsMode,o=(0,r.default)(e,["item","isSiteProtected","canManagePageSettings","isAnnotationsMode"]);return f.default.createElement(C.default.Row,(0,i.default)({style:B(t),clickable:!0,draggable:V(t,o.dragState)&&!l,isSelected:t.isSelected},o),(0,I.NestingIcons)({item:t}),f.default.createElement(C.default.Cell,null,t.isExpanded?f.default.createElement(le,{allowPasswordProtection:o.allowPasswordProtection,passwordProtected:t.get("passwordProtected"),ancestorProtected:null!==t.get("protectedAncestor")||a}):f.default.createElement(ie,{allowPasswordProtection:o.allowPasswordProtection,passwordProtected:t.get("passwordProtected"),ancestorProtected:null!==t.get("protectedAncestor")||a})),f.default.createElement(C.default.Cell,{basis:0,grow:!0,ellipsis:!0},f.default.createElement(y.default,{baseline:!0},t.name)),f.default.createElement(ae,{folder:t}),f.default.createElement(K,{item:t,actions:o.actions,isDragging:!(0,k.isNil)(o.dragState.dropLocation),remainingPages:o.remainingPages,canManagePageSettings:n,isAnnotationsMode:l}))},U=function(e){return{opacity:e.isValidDropLocation?1:.5,paddingRight:0}},B=function(e){return(0,i.default)({},U(e),{backgroundColor:e.isHovered&&e.isValidDropLocation?m.designerTheme.colors.accentBackground:null})},V=function(e,t){return t.canDrag&&!(0,M.isHomePage)(e)&&!(0,_.isMint)(e)&&!(0,M.isUtilityPage)(e)&&!t.dragTargetId&&((0,k.isNil)(e.selectedItemId)||e.isSelected)},z=function(e){var t=e.item,a=e.canManagePageSettings,n=(0,r.default)(e,["item","canManagePageSettings"]);return f.default.createElement(C.default.Row,(0,i.default)({key:t.id,clickable:!se(n.currentPageId,t),isSelected:se(n.currentPageId,t),style:{paddingRight:0}},n),f.default.createElement(C.default.Cell,null,f.default.createElement(oe,null)),f.default.createElement(C.default.Cell,{basis:0,grow:!0,ellipsis:!0},f.default.createElement(y.default,{baseline:!0},t.name)),f.default.createElement(K,{item:t,actions:n.actions,isDragging:!(0,k.isNil)(n.dragState.dropLocation),remainingPages:n.remainingPages,isSelected:se(n.currentPageId,t),canManagePageSettings:a,isAnnotationsMode:n.isAnnotationsMode}))},j=function(e){var t=e.item,a=e.onRequestCommercePanelOpen,n=e.onRequestDynamoPanelOpen,r=e.onRequestUsersPanelOpen,i=e.isPreviewMode,l=e.canManagePageSettings,o=e.isAnnotationsMode;return t===A.STATIC_SECTION_KEY?f.default.createElement(x.default,null):t===A.USER_SYSTEMS_SECTION_PLACEHOLDER?f.default.createElement(q,{isPreviewMode:i,onRequestUsersPanelOpen:r}):t===A.DYNAMIC_SECTION_PLACEHOLDER?f.default.createElement(Y,{onRequestDynamoPanelOpen:n,isPreviewMode:i,canManagePageSettings:l}):t!==A.COMMERCE_SECTION_PLACEHOLDER||o?f.default.createElement(v.default,{flex:!0,column:!0},f.default.createElement(C.default.Section,null,t===A.COMMERCE_SECTION_KEY?"Ecommerce Pages":t)):f.default.createElement(W,{onRequestCommercePanelOpen:a,isPreviewMode:i})},G=function(e){var t=e.title,a=e.children;return f.default.createElement(b.default.Card,{shrink:0,"data-automation-id":(0,N.automationFriendlyName)(t),align:"center"},f.default.createElement(v.default,{_name:"Pane_CardHead"},t),f.default.createElement(v.default,{_name:"Pane_CardBody"},a))},Y=function(e){var t=e.onRequestDynamoPanelOpen,a=e.isPreviewMode,n=e.canManagePageSettings;return f.default.createElement(G,{title:"No CMS Collection Pages"},f.default.createElement(D.default,{onClick:t,disabled:a||!n},"Create a CMS Collection")," ","and a CMS Collection Page will be generated automatically.")},W=function(e){var t=e.onRequestCommercePanelOpen,a=e.isPreviewMode;return f.default.createElement(G,{title:"No Ecommerce Pages"},f.default.createElement(D.default,{onClick:t,disabled:a},"Enable Ecommerce")," ","for this project and the Ecommerce Template Pages will be generated automatically.")},q=function(e){var t=e.isPreviewMode,a=e.onRequestUsersPanelOpen;return f.default.createElement(G,{title:"No User Pages"},f.default.createElement(D.default,{disabled:t,onClick:a},"Enable Site Users")," ","for this project and the Users Template Pages will be generated automatically.")},K=function(e){var t=e.item,a=e.actions,n=e.isDragging,r=e.remainingPages,i=e.isSelected,l=e.canManagePageSettings,o=e.isAnnotationsMode;return f.default.createElement(v.default,{flex:!0,push:"right",style:{paddingRight:5,paddingLeft:5}},(0,M.isHomePage)(t)?f.default.createElement(Q,null):null,l&&!o&&ce(t,r)?f.default.createElement($,{onClick:a.mintNestedPage}):null,t.isSelected?f.default.createElement(Z,{onClick:a.closeSettings}):!n&&f.default.createElement(X,{canManagePageSettings:l,itemType:t.type,onClick:a.openSettings,isSelected:i}))},J=function(e){e.stopPropagation()},Q=function(){return f.default.createElement(T.default,{content:"This is the current homepage"},f.default.createElement(C.default.Action,{style:ee},f.default.createElement(w.default,{dim:!0,onClick:J},f.default.createElement(p.default,null))))},$=function(e){var t=e.onClick;return f.default.createElement(T.default,{content:"Add new page inside this folder"},f.default.createElement(C.default.Action,{shy:!0,style:ee},f.default.createElement(w.default,{dim:!0,onClick:t},f.default.createElement(h.default,null))))},Z=function(e){var t=e.onClick;return f.default.createElement(C.default.Action,{style:ee},f.default.createElement(w.default,{dim:!0,onClick:t},f.default.createElement(P.default,null)))},X=function(e){var t=e.itemType,a=e.onClick,n=e.isSelected,r=e.canManagePageSettings;return f.default.createElement(T.default,{content:"".concat(r?"Edit":"View"," ").concat(t.toLowerCase()," settings")},f.default.createElement(C.default.Action,{shy:!0,style:ee,"data-automation-id":n?"page-settings-button":null},f.default.createElement(w.default,{dim:!0,onClick:a},f.default.createElement(E.default,null))))},ee={width:24,alignSelf:"center",marginLeft:0},te=function(e){var t=e.item,a=e.dropLocation;return(0,k.isNil)(a)||!t.isValidDropLocation||a.node!==t.id?null:f.default.createElement(v.default,{flex:!0,style:{position:"absolute",border:"1px solid ".concat(m.designerTheme.colors.accentBackground),top:a instanceof A.Before?-2:null,right:0,bottom:a instanceof A.After?-1:null,width:"".concat(100-7*(t.branches.count()-1),"%"),zIndex:2}})},ae=function(e){var t=e.folder;return t.isExpanded?null:f.default.createElement(C.default.Cell,{key:t.id,ellipsis:!0,shrink:0,style:{paddingRight:8}},f.default.createElement(y.default,{secondary:!0,italic:!0},de(t.childCount)))},ne=function(e){return function(t){return f.default.createElement("div",{style:{position:"relative"}},f.default.createElement("div",{style:{display:"flex",justifyContent:"center",overflow:"visible"}},f.default.createElement(e,t)))}},re=ne(function(e){var t=e.allowPasswordProtection,a=void 0!==t&&t,n=e.passwordProtected,r=e.ancestorProtected;if(e.isDraft)return f.default.createElement(F.PageDraftIcon,null);if(a){if(r)return f.default.createElement(F.PageAncestorProtectedIcon,null);if(n)return f.default.createElement(F.PageProtectedIcon,null)}return f.default.createElement(F.PageIcon,null)}),ie=ne(function(e){var t=e.allowPasswordProtection,a=void 0!==t&&t,n=e.passwordProtected,r=e.ancestorProtected;if(a){if(r)return f.default.createElement(F.FolderAncestorProtectedIcon,null);if(n)return f.default.createElement(F.FolderProtectedIcon,null)}return f.default.createElement(F.FolderIcon,null)}),le=ne(function(e){var t=e.allowPasswordProtection,a=void 0!==t&&t,n=e.passwordProtected,r=e.ancestorProtected;if(a){if(r)return f.default.createElement(F.FolderOpenAncestorProtectedIcon,null);if(n)return f.default.createElement(F.FolderOpenProtectedIcon,null)}return f.default.createElement(F.FolderOpenIcon,null)}),oe=ne(function(e){return f.default.createElement(F.PageIcon,(0,i.default)({style:{color:m.designerTheme.colors.dynamicAccent}},e))}),se=function(e,t){return t.isSelected||e===t.id},de=function(e){return 0===e?null:1===e?"1 hidden page":"".concat(e," hidden pages")},ce=function(e,t){return(0,M.isFolder)(e)&&!(0,_.isMint)(e)&&t>0},ue=(0,m.styledDiv)(function(e){return{display:"inline-block",marginLeft:e.theme.gutters.normal,position:"relative",top:2}})},5633:function(e,t,a){"use strict";var n=a(124);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(323)),i=n(a(324)),l=n(a(328)),o=n(a(327)),s=n(a(329)),d=n(a(320)),c=n(a(503)),u=n(a(879)),g=n(a(1022)),f=a(386),m=a(389),p=a(342),h=a(330);function barWidth(e,t){return"".concat(Math.max(0,100-e/t*100),"%")}function PageLimitBar(e){var t,a,n=e.maxPages,r=e.pagesUsed,i=n-r;return d.default.createElement(u.default,{basis:5,style:{height:5,position:"relative"}},d.default.createElement("div",{style:{borderRadius:8,flexGrow:1,backgroundColor:h.designerTheme.colors.backgroundDeep}}),d.default.createElement("div",{style:{backgroundColor:(t=r,a=n,a-t<=0?h.designerTheme.colors.danger:a-t<=2?h.designerTheme.colors.warning:h.designerTheme.colors.success),borderBottomLeftRadius:8,borderTopLeftRadius:8,borderBottomRightRadius:i>0?0:8,borderTopRightRadius:i>0?0:8,top:0,left:0,right:barWidth(r,n),bottom:0,position:"absolute"}}))}function PageLimitText(e){var t,a,n=e.maxPages,r=e.pagesUsed;return d.default.createElement(u.default,{justify:"space-between"},d.default.createElement(u.default,{style:{color:(t=r,a=n,a-t<=0?h.designerTheme.colors.danger:h.designerTheme.colors.warning)}},function(e,t){return"".concat(e-t,"/").concat(e," pages left")}(n,r),d.default.createElement(g.default,{style:{color:h.designerTheme.colors.foregroundDim,marginLeft:5},href:"https://university.webflow.com/courses/cms-and-dynamic-content-course"},"Consider the CMS")))}var P=(0,p.container)(function(e){return{siteData:e.SiteDataStore,pageState:e.PageStore,designerState:e.DesignerStore,userCapabilitiesState:e.UserCapabilitiesStore}})(function(e){function PageMeter(){return(0,r.default)(this,PageMeter),(0,l.default)(this,(0,o.default)(PageMeter).apply(this,arguments))}return(0,s.default)(PageMeter,e),(0,i.default)(PageMeter,[{key:"render",value:function(){if(!this.props.userCapabilitiesState.canManagePageSettings)return null;var e=this.props,t=e.siteData,a=t.maxPages,n=t.shortName,r=e.pageState,i=(0,m.getStaticPages)(r).filter(function(e){return!(0,f.isUtilityPage)(e)}).count();return a-i>5?null:d.default.createElement(c.default.Row,{clickable:!1,draggable:!1,align:"stretch",justify:"space-around",style:{padding:8,paddingTop:4,minHeight:50},column:!0,basis:50},d.default.createElement(PageLimitText,{maxPages:a,pagesUsed:i,shortName:n}),d.default.createElement(PageLimitBar,{maxPages:a,pagesUsed:i}))}}]),PageMeter}(d.default.Component));t.default=P},5634:function(e,t,a){"use strict";var n=a(124);Object.defineProperty(t,"__esModule",{value:!0}),t.NestingIcons=function(e){var t=e.item;return function(e){return e.branches.slice(1,-1).map(function(e,t){return r.default.createElement(Indent,{key:t,icon:e?"":o})}).toArray()}(t).concat(function(e){var t=e.branches;if(t.butLast().isEmpty())return(0,i.List)();return Indent({key:t.count(),icon:t.last()?s:d})}(t))};var r=n(a(320)),i=a(331),l=n(a(879)),o=r.default.createElement("div",{key:"line",style:{borderLeft:"2px solid ${designerTheme.colors.control}",height:31,position:"absolute",marginTop:-16}}),s=r.default.createElement("div",{key:"branch",style:{position:"absolute",borderLeft:"2px solid ${designerTheme.colors.control}",borderBottom:"2px solid ${designerTheme.colors.control}",width:6,height:18,top:-16,borderRadius:"0 0 0 10px"}}),d=[o,s];function Indent(e){var t=e.key,a=e.icon;return r.default.createElement(l.default,{key:t,basis:18,shrink:0,grow:0,style:{paddingLeft:5,position:"relative",opacity:.4}},a)}},5635:function(e,t,a){"use strict";var n=a(124),r=a(322);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(323)),l=n(a(324)),o=n(a(328)),s=n(a(327)),d=n(a(332)),c=n(a(329)),u=n(a(325)),g=n(a(320)),f=a(331),m=r(a(342)),p=n(a(5636)),h=a(386),P=a(334),E=r(a(389)),S=r(a(736)),v=a(400),y=a(451),b=a(354),C=a(473),T=a(392),w=(0,m.container)(function(e){var t=e.PageStore,a=e.PageManagerUIStore,n=e.SiteDataStore,r=e.CollectionStore,i=e.KeyboardStore,l=e.ValidationErrorStore,o=e.FormUIStore,s=e.BetaFeatureStore,d=e.CommerceStore,c=e.PublishDropdownUIStore,u=e.MultiPlayerStore,g=e.DesignerStore;return{pageState:t,pageManagerState:a,siteData:n,collectionState:r,keyboardState:i,validationErrorState:l,formUIState:o,betaFeatureState:s,commerceState:d,publishDropdownUIState:c,isMultiPlayerViewer:u.isViewer,isAnnotationsMode:!!g&&g.isAnnotationsMode}})(function(e){function PageSettingsContainer(){var e,t;(0,i.default)(this,PageSettingsContainer);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t=(0,o.default)(this,(e=(0,s.default)(PageSettingsContainer)).call.apply(e,[this].concat(n))),(0,u.default)((0,d.default)(t),"_moveItem",t._moveItem.bind((0,d.default)(t))),(0,u.default)((0,d.default)(t),"submitForm",function(){var e=t.props,a=e.flux,n=e.pageManagerState,r=e.validationErrorState,i=n.get("selectedItem"),l=r.getIn(["errors","page",(0,b.getId)(i)],(0,f.Map)()),o=(0,C.getHardErrors)(l),s=a.__DEPRECATED__getCreators("PageActionCreators"),d=s.syncPage,c=s.syncFolder,u=s.submitPage,g=s.submitFolder,m=(0,h.isFolder)(i);o.size>0?m?g(i):u(i):m?c(i):d(i)}),(0,u.default)((0,d.default)(t),"saveAsDraftPage",function(){_submitSavePage(t.props.pageManagerState.get("selectedItem").set("draft",!0),t.props,!0)}),(0,u.default)((0,d.default)(t),"saveAsStageForPublishPage",function(){_submitSavePage(t.props.pageManagerState.get("selectedItem").set("draft",!1),t.props,!1)}),(0,u.default)((0,d.default)(t),"duplicateCurrentPage",function(){var e=t.props,a=e.flux,n=e.pageManagerState;(0,a.__DEPRECATED__getCreators("PageActionCreators").duplicatePage)(n.get("selectedItem").id)}),(0,u.default)((0,d.default)(t),"makeCurrentPageHome",function(){var e=t.props,a=e.flux,n=e.pageManagerState;(0,a.__DEPRECATED__getCreators("PageActionCreators").syncHomePage)(n.get("selectedItem").id)}),(0,u.default)((0,d.default)(t),"deleteCurrentItem",function(){var e=t.props,a=e.flux,n=e.pageManagerState,r=a.__DEPRECATED__getCreators("PageActionCreators"),i=r.destroyPage,l=r.destroyFolder,o=n.get("selectedItem");(0,h.isFolder)(o)?l(o.id):i(o.id)}),(0,u.default)((0,d.default)(t),"goToAddHostingPageFromPasswordProtection",function(){(0,h.goToExternalActionUrl)("/dashboard/sites/"+t.props.siteData.shortName+"/hosting?ref=pm_page_password_protection")}),(0,u.default)((0,d.default)(t),"goToAddHostingPageFromCustomCode",function(){(0,h.goToExternalActionUrl)("/dashboard/sites/"+t.props.siteData.shortName+"/hosting?ref=pm_custom_code")}),(0,u.default)((0,d.default)(t),"goToAddHostingPageFromAutomaticRedirect",function(){(0,h.goToExternalActionUrl)("/dashboard/sites/"+t.props.siteData.shortName+"/hosting?u=1&ref=pm_301_redirects")}),(0,u.default)((0,d.default)(t),"goToRedirectPageUrl",function(){(0,h.goToExternalActionUrl)("/dashboard/sites/"+t.props.siteData.shortName+"/hosting#redirects")}),(0,u.default)((0,d.default)(t),"goToPasswordPage",function(){var e=t.props,a=e.flux,n=e.pageState,r=a.__DEPRECATED__getCreators("PageManagerActionCreators").switchPage,i=E.getStaticPages(n).find(function(e){return(0,h.isUtilityPage)(e)&&"401"===e.utilKey});i&&r(i.id)}),(0,u.default)((0,d.default)(t),"_updateSelection",function(e){var a=e.keyPath,n=e.value;t.props.flux.__DEPRECATED__getCreators("PageManagerActionCreators").updateSelection(a,n)}),t}return(0,c.default)(PageSettingsContainer,e),(0,l.default)(PageSettingsContainer,[{key:"render",value:function(){var e=this.props,t=e.flux,a=e.isPreviewMode,n=e.canManagePageSettings,r=e.pageState,i=e.pageManagerState,l=e.siteData,o=e.keyboardState,s=e.validationErrorState,d=e.formUIState,c=e.betaFeatureState,u=e.commerceState,m=e.publishDropdownUIState,P=e.isMultiPlayerViewer,v=e.isAnnotationsMode,C=E.getPages(r);if(!S.hasSelectedItem(i))return null;var w=S.getCurrentPageState(r,i),x=i.get("selectedItem"),I=i.get("initialFocus"),M=S.selectionSnapshot(r,i),_=d.getIn(["submittedForms",(0,b.getId)(x||(0,f.Map)())],!1),A=c.rssUrl,k=t.__DEPRECATED__getCreators("PageManagerActionCreators"),F=k.closeSettings,R=k.updateSelection,N=k.updateAutomaticRedirect,O=t.__DEPRECATED__getCreators("EditorSiteActionCreators").changePage,L=t.__DEPRECATED__getCreators("EditorUIActionCreators").setFocus,H=(0,h.isDynPage)(x)?x.slug:E.fullSlug(x.id,E.getPageTreeNodes(w)),U=this.props.collectionState.items,B=this.props.collectionState.collections,V=i.get("automaticRedirect"),z=E.getPageNodes(r),j={item:x,items:U,siteData:l,collections:B,tokenOptions:_getTokenOptions(x,B),contexts:_getContexts(x,U),isSyncing:(0,y.get)("isSyncing",r),fullSlug:H,remainingPages:l.maxPages-E.getStaticPages(r).filter(function(e){return!(0,h.isUtilityPage)(e)}).count(),siteHomePage:E.getHomePage(r),persistedParentId:M.get("parentId"),persistedSlug:M.get("slug"),isMintPage:(0,b.isMint)(M),folders:D(r),duplicateCurrentPage:this.duplicateCurrentPage,makeCurrentPageHome:this.makeCurrentPageHome,deleteCurrentItem:this.deleteCurrentItem,saveCurrentPage:this.submitForm,saveCurrentFolder:this.submitForm,saveAsDraftPage:this.saveAsDraftPage,saveAsStageForPublishPage:this.saveAsStageForPublishPage,closeSettings:F,updatePage:this._updateSelection,updateFolder:R,movePage:this._moveItem,moveFolder:this._moveItem,validationErrorState:s,formSubmitted:_,hasChildren:E.nodesWithParentId(x.id,E.getPageTreeNodes(r)).count()>=1,preferredUrl:l.preferredUrl,allowCustomCode:l.allowCustomCode,siteShortName:l.shortName,pages:C,keyboardState:o,changePage:O,setFocus:L,initialFocus:I,showRssLinkField:A,protectedAncestor:E.getProtectedAncestor({pages:z,page:x}),hasProtectedChildren:"Folder"===x.get("type")&&E.getProtectedDescendants({pages:z,folder:x}).size>0,isSiteProtected:l.protected,allowPasswordProtection:l.allowPasswordProtection,isUtilityPage:S.utilityPageList(r,i).some(function(e){return e.id===x.id}),isPreviewMode:a,canManagePageSettings:n,isAnnotationsMode:v,siteSubscription:l.siteSubscription,goToPasswordPage:this.goToPasswordPage,goToAddHostingPageFromPasswordProtection:this.goToAddHostingPageFromPasswordProtection,goToAddHostingPageFromCustomCode:this.goToAddHostingPageFromCustomCode,goToAddHostingPageFromAutomaticRedirect:this.goToAddHostingPageFromAutomaticRedirect,goToRedirectPageUrl:this.goToRedirectPageUrl,hasEcommerceEnabled:(0,T.didTheUserSetUpCommerceForThisSite)(u),automaticRedirect:V,updateAutomaticRedirect:N,domains:m.domains,isMultiPlayerViewer:P,productTypesEnabled:c.ecProductTypes};return g.default.createElement(p.default,j)}},{key:"_moveItem",value:function(e,t){var a=this.props.flux.__DEPRECATED__getCreators("PageManagerActionCreators").updateSelection,n=this.props,r=n.pageState,i=n.pageManagerState,l=S.selectionSnapshot(r,i);if(l.parentId===t)a([],{parentId:t,siblingIndex:l.siblingIndex});else{var o=E.getPageTreeNodes(r),s=(0,y.get)(t,o);a([],{parentId:t,siblingIndex:E.siblingIndexFromFolderTarget(s,o)})}}}]),PageSettingsContainer}(g.default.Component));t.default=w;var D=function(e){var t=E.getPageTreeNodes(e).filter((0,P.either)(h.isFolder,E.isRoot));return function recur(e){var a=E.nodesWithParentId(e.id,t);return f.List.of(function(e){return{value:e.id,label:e.name||e.slug||"None",none:!(e.name||e.slug),depthList:S.branches(e.id,t)}}(e)).concat(a.filter(h.isFolder).flatMap(recur))}(E.getRootNode(t))};function _getContexts(e,t){var a=e.get("dynCollection");return a?t.filter(function(e){return e.get("_cid")===a}).toList():null}function _getTokenOptions(e,t){var a=t.get(e.get("dynCollection"));return(0,v.getFieldTokenOptions)(a,t)}function _submitSavePage(e,t,a){var n=t.flux,r=t.validationErrorState.getIn(["errors","page",(0,b.getId)(e)],(0,f.Map)()),i=(0,C.getHardErrors)(r),l=n.__DEPRECATED__getCreators("PageActionCreators"),o=l.syncPage,s=l.submitPage;i.size>0?s(e):o(e,a)}},5636:function(e,t,a){"use strict";var n=a(322),r=a(124);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.closedPageSettingVisibilityState=t.HeadingExpandGroupStyled=void 0;var i=r(a(339)),l=r(a(323)),o=r(a(324)),s=r(a(328)),d=r(a(327)),c=r(a(332)),u=r(a(329)),g=r(a(325)),f=r(a(338)),m=r(a(321)),p=n(a(320)),h=r(a(379)),P=a(326),E=n(a(554)),S=a(372),v=a(658),y=r(a(378)),b=r(a(403)),C=r(a(536)),T=r(a(1263)),w=r(a(483)),D=r(a(444)),x=a(1030),I=r(a(440)),M=r(a(410)),_=r(a(500)),A=r(a(5637)),k=a(331),F=r(a(5641)),R=r(a(5642)),N=r(a(2384)),O=r(a(1013)),L=r(a(628)),H=r(a(626)),U=r(a(534)),B=a(667),V=n(a(421)),z=r(a(1026)),j=a(785),G=a(334),Y=a(386),W=a(1083),q=n(a(555)),K=r(a(519)),J=a(363),Q=r(a(415)),$=a(330),Z=a(354),X=a(358),ee=n(a(451)),te=a(389),ae=a(478),ne=a(388),re=(0,V.fieldSandbox)(V.TokenInputField),ie=(0,ne.is)("enter"),le=y.default.Head,oe=y.default.Title,se=y.default.Actions,de=y.default.Section,ce=y.default.Body,ue=y.default.Head_BackButton;function createSettingsPane(e,t,a){return function(n){return p.createElement(y.default,{basis:X.IS_EDITOR?"100%":650},p.createElement(e,(0,m.default)({title:(a||ee.get("name",n.item))+" Settings"},n)),p.createElement(J.ChildrenViewport,null,p.createElement(ce,null,p.createElement(t,n))))}}var ge=(0,$.styledDiv)(function(e){var t=e.theme;return{marginTop:4*t.gutters.base,marginBottom:4*t.gutters.base}}),fe=(0,$.styledDiv)(function(e){return{paddingTop:4*e.theme.gutters.base}}),me=(0,$.styled)(x.HeadingExpandGroup)(function(e){var t=e.theme,a=t.gutters,n=t.colors,r=t.pageSettings.expandGroup,i=r.freestanding,l=r.borderWidth;return{marginTop:i?4*a.base:0,backgroundColor:i?n.background:"transparent",borderLeftWidth:l,borderLeftStyle:"solid",borderLeftColor:n.borderDeep,borderRightWidth:l,borderRightStyle:"solid",borderRightColor:n.borderDeep,borderRadius:0}});t.HeadingExpandGroupStyled=me;var pe=(0,$.styled)(x.HeadingExpandBody)(function(e){return{padding:4*e.theme.gutters.base}}),he=(0,$.styled)(x.HeadingExpandHeading)(function(){return{paddingTop:7,paddingBottom:7}}),Pe=(0,$.styled)(b.default)(function(){return{display:"flex",alignItems:"center"}}),Ee=(0,$.styled)(N.default)(function(e){var t=e.theme;return{marginRight:2*t.gutters.base,marginBottom:t.gutters.base/2}}),Se=(0,$.styled)(D.default)(function(){return{display:"inline-block",maxWidth:"200px",verticalAlign:"bottom"}}),ve=function(e){var t=e.duplicateCurrentPage,a=e.isPreviewMode,n=e.isAnnotationsMode,r=e.canManagePageSettings,i=e.remainingPages;return e.isMultiPlayerViewer?p.createElement(_.default,{content:"Page duplication is disabled in view-only mode"},p.createElement(I.default,{disabled:!0},p.createElement(F.default,null))):a||!r||n?p.createElement(I.default,{disabled:!0},p.createElement(F.default,null)):i<=0?p.createElement(_.default,{content:"You’ve reached the maximum number of pages for this site."},p.createElement(I.default,{disabled:!0},p.createElement(F.default,null))):p.createElement(M.default,{content:"Duplicate This Page"},p.createElement(I.default,{"data-automation-id":"page-duplicate-button",onClick:t},p.createElement(F.default,null)))},ye=function(e){var t=e.children,a=e.showTrigger,n=(0,f.default)(e,["children","showTrigger"]);return a?p.createElement(_.default,n,t):t},be=function(e){var t=e.item,a=e.hasChildren,n=e.isSyncing,r=e.onClick,i=e.canManagePageSettings,l=e.isMultiPlayerViewer,o=e.isAnnotationsMode;return n?p.createElement(_.default,{content:"A page is currently being deleted."},p.createElement(j.InfiniteSpinner,{style:{margin:"0 9px"}})):(0,Z.isMint)(t)||(0,W.isDynPage)(t)||(0,W.isHomePage)(t)?null:l?p.createElement(_.default,{content:"Page deleting is disabled in view-only mode"},p.createElement(I.default,{disabled:!0},p.createElement(R.default,null))):!i||o?p.createElement(I.default,{disabled:!0},p.createElement(R.default,null)):a?p.createElement(_.default,{content:"This folder can’t be deleted because it’s not empty."},p.createElement(I.default,{disabled:!0},p.createElement(R.default,null))):p.createElement(M.default,{content:"Delete This "+((0,Y.isFolder)(t)?"Folder":"Page")},p.createElement(I.default,{onClick:r},p.createElement(R.default,null)))},Ce=function(e){var t=e.siteShortName;return p.createElement(y.default.Message,{info:!0},"Password set on site. To set page or folder passwords, remove site password in"," ",X.IS_EDITOR?"site settings":p.createElement(I.default,{tag:"a",underline:!0,href:"".concat("https://webflow.com","/dashboard/sites/").concat(t,"/hosting")},"site settings"),".")},Te=function(e){var t=e.goToAddHostingPage;return p.createElement(S.__DEPRECATED__SigmaNote,{"data-automation-id":"password-protection-note",marginTop:2,sizing:"large",width:"100%",intent:"success",control:p.createElement(I.default,{isExternal:!0,onClick:t},"Add a site plan"),content:"Add a site plan to unlock page and folder password protection.",icon:p.createElement(H.default,null)})},we=function(e){var t=e.goToPasswordPage;return p.createElement(S.__DEPRECATED__SigmaNote,{marginTop:2,sizing:"large",width:"100%",icon:p.createElement(U.default,null),control:p.createElement(I.default,{onClick:t},"Go to password page"),content:"Customize the password page your visitors will see when trying to access this page."})},De=function(e){var t=e.goToAddHostingPage;return p.createElement(S.__DEPRECATED__SigmaNote,{marginTop:2,sizing:"large",width:"100%",intent:"success",icon:p.createElement(H.default,null),control:p.createElement(I.default,{isExternal:!0,onClick:t},"Add a site plan"),content:"You’ll need a site plan to create a 301 redirect.","data-automation-id":"automatic-redirect-note"})},xe=function(e){var t=e.goToRedirectPageUrl;return p.createElement(S.__DEPRECATED__SigmaNote,{marginTop:2,marginBottom:2,sizing:"large",width:"100%",intent:"warning",icon:p.createElement(L.default,null),control:p.createElement(I.default,{isExternal:!0,onClick:t},"Learn more"),content:"Changing the parent folder or slug without a redirect may break external links to this page.","data-automation-id":"slug-changed-note"})},Ie=function(){return p.createElement(S.__DEPRECATED__SigmaNote,{marginTop:2,sizing:"large",intent:"warning",icon:p.createElement(L.default,null),content:"Custom code is not validated. Incorrect code may cause issues with the published page."})},Me=function(){return p.createElement(S.__DEPRECATED__SigmaNote,{sizing:"large",icon:p.createElement(U.default,null),marginTop:2,intent:"warning",content:"Ecommerce is enabled so your site is SSL protected. Make sure your custom code won’t create any security vulnerabilities. Unsecured code could expose sensitive customer information!"})},_e=function(){return p.createElement(S.__DEPRECATED__SigmaNote,{sizing:"large",icon:p.createElement(L.default,null),content:p.createElement(v.Text,null,"You’re editing a Collection Template. Changes here will affect all pages that use this template.")})},Ae=function(e){return p.createElement("div",{className:"bem-Field"},p.createElement(V.TextField,(0,m.default)({},e,{fieldName:"password",type:"password",placeholder:"••••••••••",label:"Password"})),!X.IS_EDITOR&&p.createElement(we,{goToPasswordPage:e.goToPasswordPage}))},ke=(0,$.styledDiv)(function(e){var t=e.theme,a=e.disabled;return{marginTop:t.gutters.x16,opacity:a?t.opacity.disabled:null}}),Fe=(0,$.styled)(b.default)(function(e){return e.isPageItem?{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0}:G.emptyObject}),Re=function(e){function Header(){var e,t;(0,l.default)(this,Header);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t=(0,s.default)(this,(e=(0,d.default)(Header)).call.apply(e,[this].concat(n))),(0,g.default)((0,c.default)(t),"state",{footerDescription:null}),(0,g.default)((0,c.default)(t),"onMouseEnter",function(e){t.setState({footerDescription:(0,W.menuItemDescription)(e.currentTarget.id)})}),(0,g.default)((0,c.default)(t),"onMouseLeave",function(){t.setState({footerDescription:null})}),t}return(0,u.default)(Header,e),(0,o.default)(Header,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.item,n=e.onClose,r=e.onConfirm,i=e.closeText,l=void 0===i?"Close":i,o=e.confirmText,s=void 0===o?(0,W.isDraftPage)(a)?"Save draft":"Save":o,d=e.deleteCurrentItem,c=e.duplicateCurrentPage,u=e.remainingPages,g=e.hasChildren,f=e.isSyncing,m=e.canManagePageSettings,h=e.isUtilityPage,P=e.dataAutomationId,E=e.isPreviewMode,v=e.isAnnotationsMode,y=e.saveAsDraftPage,C=e.saveAsStageForPublishPage,T=e.dataAutomationIdDropdownButton,w=e.dataAutomationIdDraftOption,D=e.isMultiPlayerViewer,x=!a.utilKey&&!(0,W.isHomePage)(a),I=!(0,Z.isMint)(a)&&(0,W.isStaticPage)(a)&&!h,M=this.state.footerDescription,A=f||!m||E||v;return p.createElement(le,null,X.IS_EDITOR?p.createElement(ue,{onClick:n}):null,p.createElement(oe,null,t),!X.IS_EDITOR&&p.createElement(se,null,I&&p.createElement(ve,{duplicateCurrentPage:c,isPreviewMode:E,isAnnotationsMode:v,canManagePageSettings:m,remainingPages:u,isMultiPlayerViewer:D}),!h&&p.createElement(be,{item:a,hasChildren:g,isSyncing:f,onClick:d,canManagePageSettings:m,isAnnotationsMode:v,isMultiPlayerViewer:D})),p.createElement(se,null,p.createElement(b.default,{head:!0,lighter:!0,onClick:n,"data-automation-id":"close-page-settings-button"},l),p.createElement(ye,{content:"Page settings are disabled in view-only mode",showTrigger:D},p.createElement(Fe,{head:!0,primary:!0,hasText:!0,disabled:A,"data-automation-id":(0,W.isDraftPage)(a)?"save-drafted-page-button":P,onClick:r,warning:(0,W.isDraftPage)(a),isPageItem:(0,W.isPage)(a)},s)),(0,W.isPage)(a)&&!(0,W.isDynPage)(a)?p.createElement(q.default,{right:!0,disabled:A},p.createElement(ye,{content:"Page settings are disabled in view-only mode",showTrigger:D},p.createElement(b.default,{head:!0,primary:!0,style:q.chevronDownStyles,warning:(0,W.isDraftPage)(a),disabled:A,"data-automation-id":(0,W.isDraftPage)(a)?"save-drafted-page-options-button":T},p.createElement(Q.default,null,p.createElement(O.default,null)))),p.createElement("div",{style:q.separatorLineStyle}),p.createElement(q.default.Body,{style:{minWidth:200}},p.createElement(K.default,null,p.createElement(K.default.Section,null,(0,W.isDraftPage)(a)?(0,q.MenuItem)({onClick:C,id:"staged-for-publish-option",text:"Stage for publish",disabled:!1,key:"0",isMintPage:(0,Z.isMint)(a),context:this,dataAutomationId:"save-drafted-page-as-staged-button"}):p.createElement(_.default,{dark:!0,content:(0,W.tooltipMessage)(a),placement:"left",noArrow:"true",key:"0"},(0,q.MenuItem)({onClick:y,id:"save-as-draft-option",text:"Save as draft",disabled:!x,key:"1",isMintPage:(0,Z.isMint)(a),context:this,dataAutomationId:w}))),M?p.createElement(K.default.Section,null,p.createElement(q.MenuFooter,null,p.createElement(S.__DEPRECATED__SigmaNote,{nested:!0,content:M}))):null))):null))}}]),Header}(p.PureComponent),Ne=function(e){var t=h.default.findDOMNode(e);if(t&&t instanceof HTMLElement){var a=t.querySelector("#".concat(e.props.initialFocus," > input"));a&&a.focus()}},Oe=function(e){function FolderForm(){var e,t;(0,l.default)(this,FolderForm);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t=(0,s.default)(this,(e=(0,d.default)(FolderForm)).call.apply(e,[this].concat(n))),(0,g.default)((0,c.default)(t),"handleChange",function(e){var a=e.keyPath,n=e.value;t.props.updateFolder(a,n)}),(0,g.default)((0,c.default)(t),"handleFolderChange",function(e){var a=t.props;(0,a.moveFolder)(a.item._id,e)}),(0,g.default)((0,c.default)(t),"handleSlugBlur",function(e){e.stopPropagation(),t.props.updateFolder(["slug"],(0,Z.slugify)(e.target.value))}),(0,g.default)((0,c.default)(t),"createOnEnter",function(e){ie(e)&&(e.stopPropagation(),t.props.saveCurrentFolder())}),t}return(0,u.default)(FolderForm,e),(0,o.default)(FolderForm,[{key:"componentDidMount",value:function(){Ne(this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.canManagePageSettings,n=t.isAnnotationsMode,r=t.item,i=t.folders,l=t.validationErrorState,o=t.formSubmitted,s=t.fullSlug,d=t.preferredUrl,c=t.protectedAncestor,u=t.hasProtectedChildren,g=t.isSiteProtected,f=t.siteShortName,h=t.allowPasswordProtection,E=t.goToPasswordPage,S=t.goToAddHostingPageFromPasswordProtection,v=!h;return p.createElement(V.default,{formId:"FolderSettingsForm",record:(0,k.Map)(r),recordType:"page",onChange:this.handleChange,onSubmit:P.noop,key:r.id,validationErrorState:l},function(t){var l=t(["passwordProtected"]);return p.createElement(de,null,p.createElement(V.FormBody,null,!X.IS_EDITOR&&i.count()>1&&p.createElement(V.TreeSelectField,(0,m.default)({},t(["parentId"]),{disabled:!a||n,label:"Parent Folder",options:i,onChange:e.handleFolderChange})),!X.IS_EDITOR&&p.createElement(V.TextField,(0,m.default)({},t(["name"]),{disabled:!a||n,id:"name",fieldName:"name",label:"Folder Name",autoComplete:"off",autoSelect:(0,Z.isMint)(r),onKeyUp:e.createOnEnter,formSubmitted:o,normalizer:P.trim})),!X.IS_EDITOR&&p.createElement(V.TextField,(0,m.default)({},t(["slug"]),{disabled:!a||n,id:"slug",fieldName:"slug",label:"Slug",autoComplete:"off",onBlur:n?P.identity:e.handleSlugBlur,formSubmitted:o,normalizer:Z.slugifyLive}),p.createElement(z.default,null,p.createElement(T.default,{prefix:getSlugPrefix(s,d),value:r.slug}))),p.createElement(V.SwitchField,(0,m.default)({},(0,m.default)({},l,{value:l.value||Boolean(c)||g}),{fieldName:"passwordProtected",label:"Password protection",hint:"Limit access to all the pages in the folder by setting a password.",uncheckedLabelText:"OFF",checkedLabelText:"ON",disabled:!h||Boolean(c)||g||!a||n})),(Boolean(c)||g)&&p.createElement("div",{style:{position:"relative"}},p.createElement(_.default,{dark:!0,content:g?"Password is set on site":"Password is set on '".concat(c.get("name"),"' folder"),placement:"bottom"},p.createElement("div",{style:{width:70,height:30,float:"left",display:"block",top:-30,pointerEvents:"all",cursor:"help",position:"absolute"}}))),!c&&!g&&r.get("passwordProtected")&&p.createElement(Ae,(0,m.default)({},t(["password"]),{disabled:!a||n,goToPasswordPage:E})),v&&!n&&p.createElement(Te,{goToAddHostingPage:S}),!v&&!c&&!g&&u&&!r.get("passwordProtected")&&p.createElement(y.default.Message,{warning:!0},"This folder contains password-protected items. Setting a password will overwrite those passwords."),!v&&g&&p.createElement(Ce,{siteShortName:f})))})}}]),FolderForm}(p.Component);var Le={general:!0,seo:!0,graph:!0,search:!0,custom:!0,rss:!0},He={general:!1,seo:!1,graph:!1,search:!1,custom:!1,rss:!1};t.closedPageSettingVisibilityState=He;var Ue=Object.keys(Le),Be=function(e){return Ue.every(function(t){return!e[t]})},Ve=function(e){function PageSettingsVisibility(){var e,t,a;(0,l.default)(this,PageSettingsVisibility);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=(0,s.default)(this,(e=(0,d.default)(PageSettingsVisibility)).call.apply(e,[this].concat(r))),(0,g.default)((0,c.default)(t),"state",void 0===(a=E.get().pageSettingVisibilityStates)?Le:a),(0,g.default)((0,c.default)(t),"handleSectionHeaderClick",function(e){return function(a){var n=a.altKey;t.setState(function(t){return n?Be(t)?Le:He:(0,g.default)({},e,!t[e])},function(){return E.merge({pageSettingVisibilityStates:t.state})})}}),t}return(0,u.default)(PageSettingsVisibility,e),(0,o.default)(PageSettingsVisibility,[{key:"render",value:function(){return this.props.children(this.state,this.handleSectionHeaderClick)}}]),PageSettingsVisibility}(p.PureComponent),ze=function(e){function PageForm(){var e,t;(0,l.default)(this,PageForm);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t=(0,s.default)(this,(e=(0,d.default)(PageForm)).call.apply(e,[this].concat(n))),(0,g.default)((0,c.default)(t),"handleFolderChange",function(e){var a=t.props,n=a.item;(0,a.movePage)(n._id,e)}),(0,g.default)((0,c.default)(t),"handleSlugBlur",function(e){e.stopPropagation(),t.props.updatePage({keyPath:["slug"],value:(0,Z.slugify)(e.target.value)})}),(0,g.default)((0,c.default)(t),"createOnEnter",function(e){ie(e)&&(e.stopPropagation(),t.props.saveCurrentPage())}),(0,g.default)((0,c.default)(t),"handleAutomaticRedirectChange",function(){t.props.updateAutomaticRedirect(!t.props.automaticRedirect)}),t}return(0,u.default)(PageForm,e),(0,o.default)(PageForm,[{key:"componentDidMount",value:function(){Ne(this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.canManagePageSettings,n=t.isAnnotationsMode,r=t.item,i=t.items,l=t.collections,o=t.tokenOptions,s=t.contexts,d=t.folders,c=t.updatePage,u=t.validationErrorState,g=t.formSubmitted,f=t.fullSlug,h=t.preferredUrl,E=t.allowCustomCode,v=t.siteShortName,b=t.pages,D=t.keyboardState,x=t.showRssLinkField,M=t.protectedAncestor,F=t.isSiteProtected,R=t.allowPasswordProtection,N=t.isUtilityPage,O=t.initialFocus,L=t.goToPasswordPage,U=t.goToAddHostingPageFromPasswordProtection,j=t.goToAddHostingPageFromCustomCode,G=t.goToAddHostingPageFromAutomaticRedirect,q=t.goToRedirectPageUrl,K=t.hasEcommerceEnabled,J=t.siteSubscription,Q=t.persistedSlug,$=t.persistedParentId,ee=t.isMintPage,ne=t.automaticRedirect,ie=t.domains,le=t.productTypesEnabled,oe=J&&"free"===J.type,se=(0,W.isDynPage)(r),de=(0,W.isEcommercePage)(r,l);return p.createElement(V.default,{formId:(0,V.createFormId)("PageSettingsForm-".concat(String(r.slug))),record:(0,k.Map)(r),recordType:"page",onChange:c,key:r.id,validationErrorState:u,"data-automation-id":"page-settings-form"},function(t){var c=getSlugPrefix(f,h),u=se?Ke(r.slug):r.slug||"",J=se?"/item-slug":"",ce=c+u,ue=r.parentId,ve=se&&l.get(r.get("dynCollection")),ye=ve&&ve.get("name"),be=ve&&ve.get("singularName"),we=o?o.filter(function(e){return"ImageRef"!==e.get("type")&&(t=e,!!le||"ec-product-type"!==JSON.parse(t.get("value")).path);var t}):(0,k.List)(),Fe=o?o.filter(function(e){return"ImageRef"===e.get("type")}):null,Re=Fe?Fe.map(function(e){return{label:e.get("label"),value:(0,ae.escapeTokenString)((0,ae.createTokenFromString)(e.get("value")))}}):null,Ne=r.get("seoTitle"),Oe=r.get("seoDesc"),Le="Title the page".concat(se?", using Collection fields as needed":"",". Optimal title length is approximately 55 characters."),He="Describe the page".concat(se?", using Collections fields as needed":"",". Optimal description length is 155 to 300 characters."),Ue=r.get("ogTitle"),Be=r.get("ogTitleCopied"),ze=r.get("ogDesc"),je=r.get("ogDescCopied"),Ge=r.getIn(["ogImages",0]),Ye=r.get("searchTitleCopied"),We=r.get("searchDescriptionCopied"),qe=r.get("searchImageCopied"),Je=r.get("searchExclude"),Qe=r.get("rssTitle"),$e=r.get("rssDesc"),Ze=r.get("rssItemTitle"),Xe=r.get("rssItemTitleCopied"),et=r.get("rssItemDesc"),tt=r.get("rssItemDescCopied"),at=r.get("rssItemImage"),nt=r.get("generateRss"),rt=r.get("rssItemPubDateSlug","published-on"),it=nt&&ve?ve.fields.filter(function(e){return"Date"===e.get("type")}).map(function(e){return{label:e.get("name"),value:e.get("slug")}}):(0,k.List)(),lt=r.get("rssLink"),ot=b.get(r.get("id")),st=ot?ot.get("head"):"",dt=ot?ot.get("postBody"):"",ct=ot&&Boolean(ot.get("searchSnippetOverride")),ut=E||st||dt,gt=(0,W.isHomePage)(r)||se||0===d.count()||X.IS_EDITOR||N,ft=se||X.IS_EDITOR,mt=(0,W.isHomePage)(r)||se||X.IS_EDITOR||N,pt=t(["passwordProtected"]),ht=!R,Pt=(0,B.getPublishDateOfLastPublishedDomain)(ie),Et=(0,Y.isPublishedPage)(r,Pt);return p.createElement(V.FormBody,{"data-automation-id":"pages-settings"},se?p.createElement(fe,null,p.createElement(_e,null)):null,p.createElement(Ve,null,function(f,h){return p.createElement(me,null,!de&&p.createElement("div",null,p.createElement(he,{expanded:f.general,onClick:h("general")},"General"),p.createElement(pe,{expanded:f.general},ft?null:p.createElement(V.TextField,(0,m.default)({id:"name",disabled:se||!a||n},t(["name"]),{fieldName:"name",label:"Page Name",autoComplete:"off",autoSelect:(0,Z.isMint)(r),onKeyUp:e.createOnEnter,formSubmitted:g,normalizer:P.trim,"data-automation-id":"page-name-input"})),gt?null:p.createElement(V.TreeSelectField,(0,m.default)({},t(["parentId"]),{disabled:!a||n,label:"Parent Folder",options:d,onChange:e.handleFolderChange})),mt?null:p.createElement(V.TextField,(0,m.default)({id:"slug",disabled:se||!a||n},t(["slug"]),{fieldName:"slug",label:"Slug",onBlur:n?P.identity:e.handleSlugBlur,formSubmitted:g,unparse:se?Ke:null,normalizer:Z.slugifyLive,"data-automation-id":"page-slug-input"}),p.createElement(z.default,null,p.createElement(T.default,{prefix:c,value:u,suffix:J}))),mt&&gt||ee||(0,W.isDraftPage)(r)||!Et||Q===u&&$===ue?null:p.createElement(p.Fragment,null,p.createElement(V.CheckboxField,(0,m.default)({},t([]),{secondary:!0,value:ne,onChange:e.handleAutomaticRedirectChange,fieldName:"redirectURL",inlineLabel:"Permanently redirect the old URL to this new one",disabled:oe||!a||n,"data-automation-id":"automatic-redirect-toggle"})),oe?p.createElement(p.Fragment,null,p.createElement(De,{goToAddHostingPage:G}),p.createElement(xe,{goToRedirectPageUrl:q})):ne?null:p.createElement(xe,{goToRedirectPageUrl:q})),function(e){var t=e.item,a=e.persistedParentId,n=e.isUtilityPage,r=e.makeCurrentPageHome,i=e.siteHomePage,l=e.canManagePageSettings,o=e.isAnnotationsMode;if(X.IS_EDITOR||(0,W.isHomePage)(t)||(0,Z.isMint)(t)||n||!(0,W.isStaticPage)(t))return null;var s=!(t.get("parentId")===te.ROOT_NODE.id&&a===te.ROOT_NODE.id),d=p.createElement("span",null,"The current homepage is ",p.createElement("u",null,i.name)),c=(0,W.isDraftPage)(t),u=p.createElement(Pe,{disabled:s||!l||c||o,onClick:r},p.createElement(Ee,null),s?"Move this page out of its folder to make it your homepage":p.createElement("div",null,"Make “",p.createElement(Se,null,t.name),"” Your Homepage"));return p.createElement(C.default,{label:"Homepage",hint:d,error:(0,k.Map)()},c?p.createElement(_.default,{dark:!0,content:"Stage this page for publishing to make it your homepage.",placement:"right",noArrow:"true",key:"0"},u):u)}(e.props),!N&&p.createElement(V.SwitchField,(0,m.default)({},(0,m.default)({},pt,{value:pt.value||Boolean(M)||F}),{fieldName:"passwordProtected",label:"Password protection",hint:"Limit access to this page on your published site by setting a password.",uncheckedLabelText:"OFF",checkedLabelText:"ON",disabled:!R&&!pt.value||Boolean(M)||F||!a||n})),(Boolean(M)||F)&&p.createElement("div",{style:{position:"relative"}},p.createElement(_.default,{dark:!0,content:F?"Password is set on site":"Password is set on '".concat(M.get("name"),"' folder"),placement:"bottom"},p.createElement("div",{style:{width:70,height:30,float:"left",display:"block",top:-30,pointerEvents:"all",cursor:"help",position:"absolute"}}))),ht&&!1===N&&oe&&!n&&p.createElement(Te,{goToAddHostingPage:U}),!ht&&!M&&!F&&r.get("passwordProtected")&&p.createElement(Ae,(0,m.default)({},t(["password"]),{disabled:!a||n,goToPasswordPage:L})),!ht&&F&&p.createElement(Ce,{siteShortName:v}))),p.createElement("div",null,p.createElement(he,{expanded:f.seo,onClick:h("seo")},"SEO Settings"),p.createElement(pe,{expanded:f.seo},p.createElement(w.default.Text,{flex:!0,secondary:!0,small:!0},"".concat(se?"Define a template for page titles and descriptions using Collection fields":"Specify this page's title and description",". You can see how they'll look in search engine results pages (SERPs) in the preview below.")),p.createElement(A.default,{seoTitle:Ne,url:ce,seoDesc:Oe,items:i,collections:l,contexts:s,textTokenOptions:we,seo:!0}),o?p.createElement(re,(0,m.default)({},t(["seoTitle"]),{disabled:!a||n,fieldName:"seoTitle",label:"Title Tag",options:we,lines:1,miniHint:Le,sandbox:!a,smallSandbox:!0})):p.createElement(V.TextField,(0,m.default)({},t(["seoTitle"]),{disabled:!a||n,fieldName:"seoTitle",label:"Title Tag",miniHint:Le})),o?p.createElement(re,(0,m.default)({},t(["seoDesc"]),{disabled:!a||n,fieldName:"seoDesc",label:"Meta Description",options:we,lines:3,miniHint:He,sandbox:!a,smallSandbox:!0})):p.createElement(V.TextField,(0,m.default)({},t(["seoDesc"]),{disabled:!a||n,fieldName:"seoDesc",label:"Meta Description",lines:3,miniHint:He})))),p.createElement("div",null,p.createElement(he,{expanded:f.graph,onClick:h("graph")},"Open Graph Settings"),p.createElement(pe,{expanded:f.graph},p.createElement(w.default.Text,{flex:!0,secondary:!0,small:!0},"The info that shows up when sharing content on Facebook, Twitter, LinkedIn, Pinterest, and Google+."),p.createElement(A.default,{ogTitle:Be?Ne:Ue,url:ce,ogDesc:je?Oe:ze,items:i,collections:l,ogImage:Ge,contexts:s,textTokenOptions:we,imageTokenOptions:Fe,og:!0}),o?p.createElement(re,(0,m.default)({},t([Be?"seoTitle":"ogTitle"]),{fieldName:Be?"seoTitle":"ogTitle",label:"Open Graph Title",options:we,lines:1,disabled:Be||!a||n,sandbox:!Be&&!a&&!n,smallSandbox:!0})):p.createElement(V.TextField,(0,m.default)({},t([Be?"seoTitle":"ogTitle"]),{value:Be?"":t(["ogTitle"]).value,fieldName:"ogTitle",label:"Open Graph Title",disabled:Be||!a||n,placeholder:Be?Ne:null})),p.createElement(V.CheckboxField,(0,m.default)({secondary:!0},t(["ogTitleCopied"]),{disabled:!a||n,fieldName:"ogTitleCopied",inlineLabel:"Same as SEO Title Tag"})),o?p.createElement(re,(0,m.default)({},t([je?"seoDesc":"ogDesc"]),{fieldName:je?"seoDesc":"ogDesc",label:"Open Graph Description",options:we,lines:3,disabled:je||!a||n,sandbox:!je&&!a&&!n,smallSandbox:!0})):p.createElement(V.TextField,(0,m.default)({},t([je?"seoDesc":"ogDesc"]),{value:je?"":t(["ogDesc"]).value,fieldName:"ogDesc",label:"Open Graph Description",lines:3,disabled:je||!a||n,placeholder:je?Oe:null})),p.createElement(V.CheckboxField,(0,m.default)({secondary:!0},t(["ogDescCopied"]),{disabled:!a||n,fieldName:"ogDescCopied",inlineLabel:"Same as SEO Meta Description"})),o?p.createElement(V.SelectField,(0,m.default)({options:Re},t(["ogImages",0]),{disabled:!a||n,placeholder:"Select image for Open Graph results...",label:"Open Graph Image"})):p.createElement(V.TextField,(0,m.default)({},t(["ogImages",0]),{disabled:!a||n,label:"Open Graph Image URL",hint:"Make sure your images are at least 1200px by 630px and have a 1.91:1 aspect ratio."})))),p.createElement("div",null,p.createElement(he,{expanded:f.search,onClick:h("search")},"Site Search Settings"),p.createElement(pe,{expanded:f.search,initialFocus:O},p.createElement(w.default.Text,{flex:!0,secondary:!0,small:!0},"The information that is presented in site search results. After making changes here, republish your site, then start a re-index of your site in search settings."),p.createElement(V.CheckboxField,(0,m.default)({},t(["searchExclude"]),{disabled:!a||n,fieldName:"searchExclude",inlineLabel:"Exclude ".concat(se?"these pages":"this page"," from site search results")})),se&&Je?p.createElement(y.default.Message,null,"This excludes all pages in your ".concat(String(be)," Collection from search results. You can exclude Collection Lists that reference your ").concat(String(be)," Collection in their respective element settings.")):null,p.createElement(ke,{disabled:Je},o?p.createElement(re,(0,m.default)({},t([Ye?"seoTitle":"searchTitle"]),{fieldName:Ye?"seoTitle":"searchTitle",label:"Search Title",options:we,lines:1,disabled:Ye||Je||!a||n,sandbox:!Ye&&!Je&&!a,smallSandbox:!0})):p.createElement(V.TextField,(0,m.default)({},t([Ye?"seoTitle":"searchTitle"]),{value:Ye?"":t(["searchTitle"]).value,fieldName:"searchTitle",label:"Search Title",disabled:Ye||Je||!a||n,placeholder:Ye?Ne:null})),p.createElement(V.CheckboxField,(0,m.default)({secondary:!0},t(["searchTitleCopied"]),{fieldName:"searchTitleCopied",inlineLabel:"Same as SEO Title Tag",disabled:Je||!a||n})),ct&&p.createElement(ge,null,o?p.createElement(re,(0,m.default)({},t(["searchSnippetOverride"]),{fieldName:"searchSnippetOverride",label:"Snippet Override",lines:3,options:we,disabled:!a||n,sandbox:!a&&!n,smallSandbox:!0})):p.createElement(V.TextField,(0,m.default)({},t(["searchSnippetOverride"]),{fieldName:"searchSnippetOverride",label:"Snippet Override",lines:3,disabled:!a||n})),p.createElement(y.default.Message,{warning:!0},"Weʼre phasing out the snippet override option in favor of our new"," ",p.createElement(I.default,{tag:"a",underline:!0,href:"https://webflow.com/feature/set-a-custom-search-result-description-field",target:"_blank"},"search description field"),". If you have an override set already, it will continue to display in search results unless you remove it.")),o?p.createElement(re,(0,m.default)({},t([We?"seoDesc":"searchDescription"]),{fieldName:We?"seoDesc":"searchDescription",label:"Search Description",options:we,lines:3,disabled:We||Je||!a||n,sandbox:!We&&!Je&&!a,smallSandbox:!0})):p.createElement(V.TextField,(0,m.default)({},t([We?"seoDesc":"searchDescription"]),{value:We?"":t(["searchDescription"]).value,fieldName:"searchDescription",label:"Search Description",lines:3,disabled:We||Je||!a||n,placeholder:We?Oe:null})),p.createElement(V.CheckboxField,(0,m.default)({secondary:!0},t(["searchDescriptionCopied"]),{fieldName:"searchDescriptionCopied",inlineLabel:"Same as SEO Description Tag",disabled:Je||!a})),o?p.createElement(V.SelectField,(0,m.default)({options:Re},t(qe?["ogImages",0]:["searchImage"]),{placeholder:"Select image for search results...",label:"Search Image",disabled:qe||Je||!a||n})):p.createElement(V.TextField,(0,m.default)({},t(qe?["ogImages",0]:["searchImage"]),{value:t(qe?["ogImages",0]:["searchImage"]).value,fieldName:"searchImage",label:"Search Image",disabled:qe||Je||!a||n,placeholder:t(qe?["ogImages",0]:["searchImage"]).value})),p.createElement(V.CheckboxField,(0,m.default)({secondary:!0},t(["searchImageCopied"]),{fieldName:"searchImageCopied",inlineLabel:"Same as Open Graph Image URL",disabled:Je||!a||n}))))),se?p.createElement("div",null,p.createElement(he,{expanded:f.rss,onClick:h("rss")},"RSS Feed Settings"),p.createElement(pe,{expanded:f.rss},p.createElement(w.default.Text,{flex:!0,secondary:!0,small:!0},"Publish a feed so RSS reader users can subscribe and get updates when you publish new "+String(ye)+"."),p.createElement(V.SwitchField,(0,m.default)({},t(["generateRss"]),{fieldName:"generateRss",label:"Enable RSS 2.0 feed for "+String(be)+" pages",disabled:!a||n})),nt?p.createElement(C.default,{label:"URL",error:(0,k.Map)()},p.createElement(z.default,null,p.createElement(T.default,{prefix:c,suffix:u+"/rss.xml"}))):null,nt?p.createElement(V.TextField,(0,m.default)({},t(["rssTitle"]),{disabled:!a||n,fieldName:"rssTitle",label:"Channel Title",lines:1,hint:"The title of your channel in RSS readers like Feedly. In most cases, your site or blog’s name is your best bet."})):null,nt?p.createElement(V.TextField,(0,m.default)({},t(["rssDesc"]),{disabled:!a||n,fieldName:"rssDesc",label:"Channel Description",lines:3,hint:"A brief description of the content you publish and why people should want to read it."})):null,nt&&(x||lt)?p.createElement(V.TextField,(0,m.default)({},t(["rssLink"]),{disabled:!a||n,fieldName:"rssLink",label:"Channel Link URL",lines:1,hint:"The url that will override the site domain in RSS Channel <link> tag.",placeholder:"E.g. https://webflow.com"})):null,nt?p.createElement(re,(0,m.default)({},t([Xe?"seoTitle":"rssItemTitle"]),{fieldName:Xe?"seoTitle":"rssItemTitle",label:"Item Title",options:we,lines:1,hint:"The title of individual items in your feed – usually the blog post or page title.",disabled:Xe||!a||n,sandbox:!Xe&&!a,smallSandbox:!0})):null,nt?p.createElement(V.CheckboxField,(0,m.default)({secondary:!0},t(["rssItemTitleCopied"]),{disabled:!a||n,fieldName:"rssItemTitleCopied",inlineLabel:"Same as SEO Title Tag"})):null,nt?p.createElement(re,(0,m.default)({},t([tt?"seoDesc":"rssItemDesc"]),{fieldName:tt?"seoDesc":"rssItemDesc",label:"Item Description",options:we,lines:3,hint:"A brief summary of individual items' content.",disabled:tt||!a||n,sandbox:!tt&&!a,smallSandbox:!0})):null,nt?p.createElement(V.CheckboxField,(0,m.default)({secondary:!0},t(["rssItemDescCopied"]),{disabled:!a||n,fieldName:"rssItemDescCopied",inlineLabel:"Same as SEO Meta Description"})):null,nt?p.createElement(V.SelectField,(0,m.default)({options:Re},t(["rssItemImage"]),{disabled:!a||n,placeholder:"Select image for Item Image...",label:"Item Image"})):null,nt?p.createElement(V.SelectField,(0,m.default)({options:it},t(["rssItemPubDateSlug"]),{disabled:!a||n,label:"Item Publication Date"})):null,nt?p.createElement(A.default,{rssTitle:Qe,rssDesc:$e,rssItemTitle:Xe?Ne:Ze,rssItemDesc:tt?Oe:et,rssItemImage:at,rssItemPubDateSlug:rt,url:ce,contexts:s,textTokenOptions:we,imageTokenOptions:Fe,items:i,collections:l,rss:!0}):null,nt?p.createElement(V.NumberField,(0,m.default)({small:!0},t(["rssTtl"]),{disabled:!a||n,fieldName:"rssTtl",label:"Channel Refresh Time",minValue:1,keyboardState:D,placeholder:"E.g. 60",hint:"How often (in minutes) RSS readers should check for new content. Most readers define their own refresh time, so this is a fallback."})):null)):null,X.IS_EDITOR?null:p.createElement("div",null,p.createElement(he,{expanded:f.custom,onClick:h("custom")},"Custom Code"),p.createElement(pe,{expanded:f.custom},p.createElement(w.default.Text,{flex:!0,secondary:!0,small:!0},"Custom code and scripts will only appear on the published site. The code included here will only apply to this page, and will appear after any site-wide custom code."),ut&&!n?p.createElement(ge,null,p.createElement(re,(0,m.default)({},t(["head"]),{disabled:!a,fieldName:"head",label:"Inside <head> tag",code:!0,options:o,sandbox:!a})),p.createElement(Ie,null),K&&p.createElement(Me,null)):null,ut&&!n?p.createElement(ge,null,p.createElement(re,(0,m.default)({},t(["postBody"]),{disabled:!a||n,fieldName:"postBody",label:"Before </body> tag",code:!0,options:o,sandbox:!a})),p.createElement(Ie,null),K&&p.createElement(Me,null)):null,ut||n?null:p.createElement(S.__DEPRECATED__SigmaNote,{sizing:"large",width:"100%",marginTop:3,intent:"success",icon:p.createElement(H.default,null),control:p.createElement(I.default,{onClick:j,isExternal:!0},"Custom code requires a hosting plan."),content:"Custom code requires a hosting plan."}))))}))})}}]),PageForm}(p.Component);function PageButtonActions(e){var t=e.closeSettings,a=e.saveCurrentPage,n=(0,f.default)(e,["closeSettings","saveCurrentPage"]);return p.createElement(Re,(0,m.default)({},n,{onClose:t,onConfirm:a,dataAutomationId:"save-page-settings-button",dataAutomationIdDropdownButton:"save-page-options-button",dataAutomationIdDraftOption:"save-page-as-draft-options-button"}))}var je=function(e){function MintPageButtonActions(){var e,t;(0,l.default)(this,MintPageButtonActions);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t=(0,s.default)(this,(e=(0,d.default)(MintPageButtonActions)).call.apply(e,[this].concat(n))),(0,g.default)((0,c.default)(t),"handleClose",function(e){e.stopPropagation(),t.props.closeSettings()}),(0,g.default)((0,c.default)(t),"handleConfirm",function(e){e.stopPropagation(),t.props.saveCurrentPage()}),t}return(0,u.default)(MintPageButtonActions,e),(0,o.default)(MintPageButtonActions,[{key:"render",value:function(){var e=this.props,t=e.item,a=(0,f.default)(e,["item"]);return p.createElement(Re,(0,m.default)({},a,{item:t,onClose:this.handleClose,onConfirm:this.handleConfirm,dataAutomationId:"create-new-page-button",dataAutomationIdDropdownButton:"create-new-page-options-button",dataAutomationIdDraftOption:"create-new-page-options-as-draft-button",confirmText:"Create"}))}}]),MintPageButtonActions}(p.Component);var Ge=function(e){var t=(0,k.Map)();function render(a){var n=t.find(function(t){return function(a,n){return(0,k.fromJS)(e(t)).filter(function(e,t){return n.has(t)}).equals(n)}}(a));return n?p.createElement(n,a):null}return render.register=function(e,a){return t=t.set((0,k.fromJS)(e),a),a},render.when=function(e,a){return t=t.set((0,k.fromJS)(e),a),render},render}(function(e){var t=e.item,a=e.isUtilityPage;return{type:ee.get("type",t),isMint:(0,Z.isMint)(t),isUtilityPage:a}});Ge.register({type:"Page",isMint:!1},createSettingsPane(PageButtonActions,ze)),Ge.register({type:"Page",isMint:!0,isUtilityPage:!0},createSettingsPane(PageButtonActions,ze)),Ge.register({type:"Page",isMint:!0,isUtilityPage:!1},createSettingsPane(je,ze,"New Page")),Ge.register({type:"Folder",isMint:!1},createSettingsPane(function(e){var t=e.closeSettings,a=e.saveCurrentFolder,n=(0,f.default)(e,["closeSettings","saveCurrentFolder"]);return p.createElement(Re,(0,m.default)({},n,{onClose:t,onConfirm:a}))},Oe)),Ge.register({type:"Folder",isMint:!0},createSettingsPane(function(e){var t=e.item,a=e.saveCurrentFolder,n=e.closeSettings,r=(0,f.default)(e,["item","saveCurrentFolder","closeSettings"]);return p.createElement(Re,(0,m.default)({},r,{item:t,onClose:n,onConfirm:a,confirmText:"Create",dataAutomationId:"create-new-folder-button"}))},Oe,"New Folder"));var Ye,We,qe=(Ye=["item"],We=Ge,function(e){return Ye.some(function(t){return!e[t]})?null:We(e)});t.default=qe;var Ke=function(e){return e.replace(/^detail_/,"")};function getSlugPrefix(e,t){if(null===e)return"";t=t||"website.com";var a=e.split("/").slice(0,-1);return 0===a.length?t+"/":[t].concat((0,i.default)(a)).join("/")+"/"}},5637:function(e,t,a){"use strict";var n=a(124);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(321)),i=n(a(336)),l=n(a(338)),o=n(a(320)),s=a(331),d=n(a(343)),c=n(a(483)),u=n(a(569)),g=n(a(5638)),f=n(a(536)),m=a(408),p=a(355),h=a(478),P=a(664),E=a(354),S=n(a(5639)),v=n(a(5640)),y=a(330),b=a(1908),C=a(481),T=a(348),w=o.default.memo(function(e){var t=e.siteSeoTitle,a=void 0===t?"":t,n=e.siteSeoDesc,s=void 0===n?"":n,d=e.seoTitle,c=void 0===d?"":d,u=e.seoDesc,g=void 0===u?"":u,f=e.ogTitle,p=void 0===f?"":f,h=e.ogDesc,P=void 0===h?"":h,E=e.rssTitle,y=void 0===E?"":E,C=e.rssDesc,T=void 0===C?"":C,w=e.rssItemTitle,D=void 0===w?"":w,x=e.rssItemDesc,A=void 0===x?"":x,k=e.rssItemImage,F=e.rssItemPubDateSlug,R=e.url,N=e.ogImage,O=e.items,L=e.collections,H=e.contexts,U=e.textTokenOptions,B=e.imageTokenOptions,V=e.rss,z=e.og,j=(0,l.default)(e,["siteSeoTitle","siteSeoDesc","seoTitle","seoDesc","ogTitle","ogDesc","rssTitle","rssDesc","rssItemTitle","rssItemDesc","rssItemImage","rssItemPubDateSlug","url","ogImage","items","collections","contexts","textTokenOptions","imageTokenOptions","rss","og"]),G=(0,b.useCurrencySettings)(),Y=o.default.useState(0),W=(0,i.default)(Y,2),q=W[0],K=W[1],J=function(e){K(function(t){var a=H?H.size:0;return(0,m.wrap)(a,t+e)})},Q=H&&H.get(q),$=Boolean(H),Z=$?R+"/"+(Q?Q.get("slug"):"item-slug"):R,X={caret:S.default,onClick:function(){return J(-1)}},ee={caret:v.default,onClick:function(){return J(1)}};if(z){var te=parseTextWithContext({text:p,context:Q,items:O,collections:L,maxLength:90,isDynamic:$,tokenOptions:U,currencySettings:G}),ae=parseTextWithContext({text:P,context:Q,items:O,collections:L,maxLength:300,isDynamic:$,tokenOptions:U,currencySettings:G}),ne=N?parseTextWithContext({text:N,context:Q,items:O,collections:L,isDynamic:$,tokenOptions:B,currencySettings:G}):null,re=(0,r.default)({ogTitle:te,ogDesc:ae,ogImage:ne,url:Z,contexts:H,leftArrowProps:X,rightArrowProps:ee},j);return o.default.createElement(M,re)}if(V){var ie=(0,r.default)({siteSeoTitle:a,siteSeoDesc:s,seoTitle:c,seoDesc:g,rssTitle:y,rssDesc:T,rssItemTitle:D,rssItemDesc:A,rssItemImage:k,rssItemPubDateSlug:F,items:O,collections:L,isDynamic:$,textTokenOptions:U,imageTokenOptions:B,contexts:H,currencySettings:G},j);return o.default.createElement(_,ie)}var le=parseTextWithContext({text:c,context:Q,items:O,collections:L,isDynamic:$,tokenOptions:U,currencySettings:G}),oe=parseTextWithContext({text:g,context:Q,items:O,collections:L,maxLength:160,isDynamic:$,tokenOptions:U,currencySettings:G}),se=(0,r.default)({seoTitle:le,seoDesc:oe,url:Z,contexts:H,leftArrowProps:X,rightArrowProps:ee},j);return o.default.createElement(I,se)});t.default=w;var D=function(e){var t=e.caret,a=(0,l.default)(e,["caret"]);return o.default.createElement(d.default,(0,r.default)({_name:"SearchResultPreview_Arrow"},a),o.default.createElement(t,{scale:1.1}))},x=(0,y.styledDiv)(function(e){return{marginTop:e.theme.gutters.x12}}),I=function(e){var t=e.seoTitle,a=e.seoDesc,n=e.url,i=e.contexts,s=e.leftArrowProps,c=e.rightArrowProps,u=(0,l.default)(e,["seoTitle","seoDesc","url","contexts","leftArrowProps","rightArrowProps"]);return o.default.createElement(f.default,{label:"Search Result Preview"},o.default.createElement(d.default,(0,r.default)({_name:"SearchResultPreview",modifiers:{seo:!0}},u),o.default.createElement(A,{contexts:i,leftArrowProps:s,rightArrowProps:c}),o.default.createElement(F,{h:3,default:""===t},t||"Title Tag"),o.default.createElement(N,null,n),o.default.createElement(R,{default:""===a},a||"Meta Description")),o.default.createElement(x,null,o.default.createElement(C.Note,{content:o.default.createElement(T.Copy,null,"This preview uses the typical character limits for Google search result pages on desktop. Search engines do experiment with their character limits, and may decide to show different content.")})))},M=function(e){var t=e.ogTitle,a=e.ogDesc,n=e.ogImage,i=e.contexts,s=e.leftArrowProps,c=e.rightArrowProps,u=e.url,g=(0,l.default)(e,["ogTitle","ogDesc","ogImage","contexts","leftArrowProps","rightArrowProps","url"]);return o.default.createElement(f.default,{label:"Open Graph Preview"},o.default.createElement(d.default,(0,r.default)({_name:"SearchResultPreview",modifiers:{og:!0}},g),o.default.createElement(A,{contexts:i,leftArrowProps:s,rightArrowProps:c}),n?o.default.createElement(k,{src:n}):null,o.default.createElement(F,{h:3,default:""===t},t||"Open Graph Title"),o.default.createElement(R,{default:""===a},a||"Open Graph Description"),o.default.createElement(N,null,u)))},_=function(e){var t=e.rssTitle,a=e.rssDesc,n=e.rssItemTitle,i=e.rssItemDesc,s=e.rssItemImage,c=e.rssItemPubDateSlug,u=e.items,g=e.collections,m=e.isDynamic,p=e.textTokenOptions,h=e.imageTokenOptions,S=e.contexts,v=e.currencySettings,y=(0,l.default)(e,["rssTitle","rssDesc","rssItemTitle","rssItemDesc","rssItemImage","rssItemPubDateSlug","items","collections","isDynamic","textTokenOptions","imageTokenOptions","contexts","currencySettings"]),b=""===t&&""===a&&(!S||0===S.size),C=!b&&S.filterNot(E.isDraft).every(function(e){var t=parseTextWithContext({text:n,context:e,items:u,collections:g,isDynamic:m,tokenOptions:p,currencySettings:v}),a=parseTextWithContext({text:i,context:e,items:u,collections:g,isDynamic:m,tokenOptions:p,currencySettings:v});return t&&a}),T="created-on"===c||"updated-on"===c||"published-on"===c||S.every(function(e){return Boolean(e.get(c))}),w=!!b||t&&a&&C&&T,D=g.get(S.getIn([0,"_cid"])),x=D?D.fields.find(function(e){return e.get("slug")===c}).get("name"):null,I=D?D.get("singularName"):null,M=w?null:{text:T?"RSS feed is invalid. Some of the title or item fields are empty in the resulting RSS feed.":"RSS feed is invalid. ".concat(x," is not defined for every ").concat(I,"."),focused:!0,severe:!0};return o.default.createElement(f.default,{label:"RSS Feed Preview",notice:M,hint:S&&S.size?"RSS readers control how your feed displays, so this preview is just to give you an idea of how the options you set above translate to a reader app.":""},o.default.createElement(d.default,(0,r.default)({_name:"SearchResultPreview",modifiers:{rss:!0}},y),o.default.createElement(F,{h:3,default:""===t},t||"RSS Channel Title"),o.default.createElement(R,{default:""===a},a||"RSS Channel Description"),S?S.filterNot(E.isDraft).sortBy(function(e){return e.get(c)}).reverse().slice(0,3).map(function(e,t){var a=parseTextWithContext({text:n,context:e,items:u,collections:g,isDynamic:m,tokenOptions:p,currencySettings:v}),r=parseTextWithContext({text:i,context:e,items:u,collections:g,isDynamic:m,tokenOptions:p,currencySettings:v}),l=(0,P.toString)(e.get(c),"dddd, MMMM D YYYY [at] hh:mm:ss ZZ"),d=s&&parseTextWithContext({text:s,context:e,items:u,collections:g,isDynamic:m,tokenOptions:h,currencySettings:v});return o.default.createElement(O,{key:t},d?o.default.createElement(k,{src:d}):null,o.default.createElement(F,{h:3,default:""===a},a||"Item Title"),o.default.createElement(N,null,l),o.default.createElement(R,{default:""===r},r||"Item Description"))}):null))},A=function(e){var t=e.contexts,a=e.leftArrowProps,n=e.rightArrowProps;return t&&t.size>1?o.default.createElement(d.default,{_name:"SearchResultPreview_Arrows"},o.default.createElement(D,a),o.default.createElement(D,n)):null},k=function(e){return""===e.src?null:o.default.createElement(d.default,(0,r.default)({_name:"SearchResultPreview_Image",tag:g.default},e))},F=function(e){return o.default.createElement(d.default,(0,r.default)({_name:"SearchResultPreview_Heading",modifiers:{default:e.default},tag:c.default},e))},R=function(e){return o.default.createElement(d.default,(0,r.default)({_name:"SearchResultPreview_Description",modifiers:{default:e.default},tag:u.default},e))},N=function(e){return o.default.createElement(d.default,(0,r.default)({_name:"SearchResultPreview_Url",modifiers:{default:e.default},tag:u.default},e))},O=function(e){return o.default.createElement(d.default,(0,r.default)({_name:"SearchResultPreview_ItemList"},e))};function parseTextWithContext(e){var t=e.text,a=e.context,n=void 0===a?(0,s.fromJS)({}):a,r=e.items,i=e.collections,l=e.maxLength,o=e.isDynamic,d=e.tokenOptions,c=e.currencySettings;if(!o)return l?(0,p.truncateEnd)(t.trim(),l):t.trim();var u=(0,h.replaceTokens)(t,n,{collections:i,items:r,options:d,includeShorthands:!0,dangerouslyUnescaped:!0,currencySettings:c});return l?(0,p.truncateEnd)(u.trim(),l):u.trim()}},5638:function(e,t,a){"use strict";var n=a(124);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(321)),i=n(a(323)),l=n(a(324)),o=n(a(328)),s=n(a(327)),d=n(a(329)),c=n(a(320)),u=n(a(343)),g=function(e){function Image(){return(0,i.default)(this,Image),(0,o.default)(this,(0,s.default)(Image).apply(this,arguments))}return(0,d.default)(Image,e),(0,l.default)(Image,[{key:"render",value:function(){var e=(0,r.default)({},this.props),t=(0,r.default)({_name:"Image",tag:"img"},e);return c.default.createElement(u.default,t)}}]),Image}(c.default.Component);t.default=g},5639:function(e,t,a){"use strict";var n=a(320).createElement;e.exports=function(e){var t=e.scale||1;return n("svg",{"data-icon":"CaretTriangleLeftLarge","aria-hidden":!0,focusable:!1,width:11*t,height:13*t,viewBox:"0 0 11 13",y:null!=e.y?e.y:null,x:null!=e.x?e.x:null,className:"bem-Svg"+(e.className?" "+e.className:""),style:Object.assign({display:"block",transform:"translate(0,0)"},e.style)},n("path",{fill:"currentColor",d:"M1 6.5L10 1v11z"}))},e.exports.displayName="Svg(CaretTriangleLeftLarge)"},5640:function(e,t,a){"use strict";var n=a(320).createElement;e.exports=function(e){var t=e.scale||1;return n("svg",{"data-icon":"CaretTriangleRightLarge","aria-hidden":!0,focusable:!1,width:11*t,height:13*t,viewBox:"0 0 11 13",y:null!=e.y?e.y:null,x:null!=e.x?e.x:null,className:"bem-Svg"+(e.className?" "+e.className:""),style:Object.assign({display:"block",transform:"translate(0,0)"},e.style)},n("path",{fill:"currentColor",d:"M10 6.5L1 12V1z"}))},e.exports.displayName="Svg(CaretTriangleRightLarge)"},5641:function(e,t,a){"use strict";var n=a(320).createElement;e.exports=function(e){var t=e.scale||1;return n("svg",{"data-icon":"PageDuplicate","aria-hidden":!0,focusable:!1,width:14*t,height:16*t,viewBox:"0 0 14 16",y:null!=e.y?e.y:null,x:null!=e.x?e.x:null,className:"bem-Svg"+(e.className?" "+e.className:""),style:Object.assign({display:"block",transform:"translate(0,0)"},e.style)},n("path",{fill:"currentColor",d:"M9 1H5v10h8V5L9 1zM3 5H1v10h8v-2H3V5z"}))},e.exports.displayName="Svg(PageDuplicate)"},5642:function(e,t,a){"use strict";var n=a(320).createElement;e.exports=function(e){var t=e.scale||1;return n("svg",{"data-icon":"TrashSolidMedium2","aria-hidden":!0,focusable:!1,width:14*t,height:15*t,viewBox:"0 0 14 15",y:null!=e.y?e.y:null,x:null!=e.x?e.x:null,className:"bem-Svg"+(e.className?" "+e.className:""),style:Object.assign({display:"block",transform:"translate(0,0)"},e.style)},n("path",{fill:"currentColor",d:"M2 13a1 1 0 001 1h8a1 1 0 001-1V6H2v7zm8-11a1 1 0 01-1-1H5a1 1 0 01-1 1H1v2h12V2h-3z"}))},e.exports.displayName="Svg(TrashSolidMedium2)"}}]);
//# sourceMappingURL=designer.e5efd80b61c8e770417a.chunk.js.map